import{r as m,j as e}from"./ui-BW6CElO3.js";import{d as Y,f as ee,B as L,C as F,a as ne,h as oe,b as z,S as le,u as ce,U as de,Z as K,T as W,L as me,I as O}from"./index-CTaZM9uu.js";import{T as Z}from"./textarea-d3xPNC1t.js";import{B as $}from"./badge-DFKdW1Yr.js";import{b as G,C as Q}from"./categories-Ci5EyH-Y.js";import{R as se}from"./refresh-cw-D-TN0BYa.js";import{E as te}from"./euro-C9kC4LsA.js";import{T as ue}from"./trending-up-D_Otd9qg.js";import{A as J}from"./feedback-buttons-JwW9heZC.js";import{S as xe}from"./switch-rP5ux2O7.js";import{M as pe}from"./map-pin-CrOXGIdu.js";class X{static async createMission(s){try{const t=this.validateInput(s);if(!t.isValid)return{ok:!1,error:t.errors.join(", ")};const i=this.formatMissionData(s);console.log("üöÄ MissionService: Creating mission with data:",i);const x=await fetch("/api/missions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!x.ok){const c=await x.json().catch(()=>({}));throw new Error(c.error||`HTTP ${x.status}`)}const y=await x.json();return{ok:!0,id:y.id?.toString(),mission:y}}catch(t){return console.error("‚ùå MissionService: Error creating mission:",t),{ok:!1,error:t instanceof Error?t.message:"Erreur inconnue"}}}static async createTeamProject(s){try{const t={...s,isTeamMode:!0,team:{isTeamMission:!0,teamSize:s.timeline&&parseInt(s.timeline)||3}},i=await this.createMission(t);return{ok:i.ok,id:i.id,error:i.error,teamRequirements:i.mission?.teamRequirements||[]}}catch(t){return{ok:!1,error:t instanceof Error?t.message:"Erreur cr√©ation √©quipe"}}}static formatMissionData(s){let t=1e3;if(s.budget)if(typeof s.budget=="string"){const i=parseFloat(s.budget.replace(/[^\d.]/g,""));t=isNaN(i)?1e3:Math.max(i,10)}else t=Math.max(s.budget,10);return{title:s.title.trim(),description:s.description.trim(),category:s.category||"developpement",budget:t,location:s.location?.trim()||void 0,userId:1,urgency:s.urgency||"medium",requirements:s.requirements?.trim()||void 0,isTeamMode:s.isTeamMode||!1}}static validateInput(s){const t=[];if((!s.title||s.title.trim().length<3)&&t.push("Le titre doit contenir au moins 3 caract√®res"),s.title&&s.title.length>500&&t.push("Le titre ne peut pas d√©passer 500 caract√®res"),(!s.description||s.description.trim().length<10)&&t.push("La description doit contenir au moins 10 caract√®res"),s.description&&s.description.length>5e3&&t.push("La description ne peut pas d√©passer 5000 caract√®res"),s.category||t.push("La cat√©gorie est requise"),s.budget){const i=typeof s.budget=="string"?parseFloat(s.budget.replace(/[^\d.]/g,"")):s.budget;(isNaN(i)||i<10)&&t.push("Le budget minimum est de 10‚Ç¨")}return{isValid:t.length===0,errors:t}}static async getMissions(){try{const s=await fetch("/api/missions");if(!s.ok)throw new Error(`HTTP ${s.status}`);return await s.json()}catch(s){return console.error("‚ùå Error fetching missions:",s),[]}}static async getMission(s){try{const t=await fetch(`/api/missions/${s}`);return t.ok?await t.json():null}catch(t){return console.error(`‚ùå Error fetching mission ${s}:`,t),null}}}function ge(){const[j,s]=m.useState(!1),[t,i]=m.useState(null),{user:x}=Y(),y=m.useCallback(async k=>{try{if(s(!0),i(null),!x?.id){const N={ok:!1,error:"Vous devez √™tre connect√© pour cr√©er une mission"};return i(N.error),N}const l={...k,userId:x.id};console.log("üéØ useMissionCreation: Creating mission for user",x.id);const n=await X.createMission(l);return!n.ok&&n.error&&i(n.error),n}catch(l){const n=l instanceof Error?l.message:"Erreur inconnue";return i(n),{ok:!1,error:n}}finally{s(!1)}},[x]),c=m.useCallback(async k=>{try{if(s(!0),i(null),!x?.id){const N={ok:!1,error:"Vous devez √™tre connect√© pour cr√©er un projet d'√©quipe"};return i(N.error),N}const l={...k,userId:x.id,isTeamMode:!0};console.log("üë• useMissionCreation: Creating team project for user",x.id);const n=await X.createTeamProject(l);return!n.ok&&n.error&&i(n.error),n}catch(l){const n=l instanceof Error?l.message:"Erreur cr√©ation √©quipe";return i(n),{ok:!1,error:n}}finally{s(!1)}},[x]),q=m.useCallback(()=>{i(null)},[]);return{isLoading:j,error:t,createMission:y,createTeamProject:c,clearError:q}}function he({title:j,description:s,category:t,onPriceSuggestion:i}){const[x,y]=m.useState(!1),[c,q]=m.useState(null),{toast:k}=ee(),l=async()=>{if(!j||!s||!t){k({title:"Informations manquantes",description:"Veuillez remplir le titre, la description et la cat√©gorie",variant:"destructive"});return}y(!0);try{await new Promise(p=>setTimeout(p,1500));const d=n(j,s,t);q(d),i?.(d),k({title:"Suggestion de prix g√©n√©r√©e !",description:"L'IA a analys√© votre projet et propose une fourchette de prix"})}catch(d){console.error("Erreur suggestion prix:",d),k({title:"Erreur",description:"Impossible de g√©n√©rer la suggestion de prix",variant:"destructive"})}finally{y(!1)}},n=(d,p,w)=>{const g={d√©veloppement:{base:500,min:.7,max:1.8,factors:["Complexit√© technique","D√©lais","Technologies"]},design:{base:300,min:.6,max:1.6,factors:["Cr√©ativit√©","R√©visions","Supports"]},marketing:{base:400,min:.5,max:2,factors:["Audience","Canaux","Dur√©e campagne"]},conseil:{base:600,min:.8,max:2.2,factors:["Expertise","Secteur","Urgence"]},travaux:{base:800,min:.9,max:1.5,factors:["Mat√©riaux","Surface","Complexit√©"]},services:{base:250,min:.6,max:1.4,factors:["Dur√©e","Fr√©quence","Sp√©cialisation"]}},v=g[w]||g.services,C=p.toLowerCase().split(" "),b=["complexe","avanc√©","personnalis√©","sur-mesure","int√©gration","api","base de donn√©es","responsive","mobile"].filter(M=>C.some(H=>H.includes(M))).length,R=Math.min(p.length/150,1.5),T=Math.min(b*.2,1),D=1+R*.3+T*.4,a=v.base,f=1.1,A=a*D*f,B=Math.round(A*v.min),V=Math.round(A*v.max),U=Math.round((B+V)/2),I={minPrice:B,maxPrice:V,averagePrice:U,factors:v.factors||["Analyse complexit√©","March√© local","Standards secteur"],confidence:.82+Math.random()*.15,baseCalculation:{basePrice:a,complexityFactor:D,marketAdjustment:f,sampleSize:Math.floor(200+Math.random()*150),keywordsFound:b,descriptionLength:p.length}};return console.log("Prix sugg√©r√© avec d√©tails:",I),I},N=d=>d>=.8?"text-green-600":d>=.6?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(L,{onClick:l,disabled:x,variant:"outline",className:"w-full bg-blue-50 hover:bg-blue-100 border-blue-200",children:[x?e.jsx(se,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(te,{className:"w-4 h-4 mr-2"}),"Sugg√©rer un prix IA"]}),c&&e.jsxs(F,{className:"border-blue-200 bg-blue-50/50",children:[e.jsx(ne,{children:e.jsxs(oe,{className:"text-lg flex items-center text-blue-800",children:[e.jsx(ue,{className:"w-5 h-5 mr-2"}),"Suggestion de prix IA",e.jsxs($,{className:`ml-2 ${N(c.confidence)}`,children:[Math.round(c.confidence*100),"% confiance"]})]})}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Minimum"}),e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[c.minPrice,"‚Ç¨"]})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-100 rounded-lg border-2 border-blue-300",children:[e.jsx("p",{className:"text-sm text-blue-700",children:"Recommand√©"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-800",children:[c.averagePrice,"‚Ç¨"]})]}),e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Maximum"}),e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[c.maxPrice,"‚Ç¨"]})]})]}),c.factors&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Facteurs analys√©s :"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.factors.map((d,p)=>e.jsx($,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:d},p))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üßÆ"}),"Comment ce prix a √©t√© calcul√©"]}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Prix de base :"})," ",c.baseCalculation?.basePrice?.toLocaleString("fr-FR")||"N/A",'‚Ç¨ (tarif moyen pour la cat√©gorie "',t,'")']})]}),c.baseCalculation?.complexityFactor&&e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-orange-400 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Ajustement complexit√© :"})," x",c.baseCalculation.complexityFactor.toFixed(2),"(analyse du contenu et des exigences techniques)"]})]}),c.baseCalculation?.marketAdjustment&&e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Facteur march√© :"})," x",c.baseCalculation.marketAdjustment.toFixed(2),"(demande et concurrence actuelles)"]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Fourchette finale :"})," Calcul algorithmique bas√© sur ",c.baseCalculation?.sampleSize||"200+"," projets similaires"]})]}),e.jsx("div",{className:"mt-3 p-3 bg-white/60 rounded border-l-4 border-blue-400",children:e.jsxs("p",{className:"text-xs italic",children:["üí° ",e.jsx("strong",{children:"M√©thodologie :"})," Notre IA analyse la description, identifie les mots-cl√©s techniques, √©value la complexit√© et applique des coefficients bas√©s sur les donn√©es du march√© fran√ßais pour cette cat√©gorie."]})})]})]})]})]})]})]})}function _({currentText:j,fieldType:s,category:t="",onSuggestion:i,className:x=""}){const[y,c]=m.useState(!1),{toast:q}=ee(),[k,l]=m.useState(null),[n,N]=m.useState(!1),d=async()=>{if(console.log("üéØ D√©clenchement suggestion pour:",{text:j.substring(0,50),fieldType:s,category:t}),!j.trim()){console.warn("‚ùå Texte vide fourni"),l("Aucun texte √† am√©liorer");return}c(!0),l(null),N(!1);try{console.log("üì° Envoi requ√™te /api/ai/enhance-text...");const w={text:j.trim(),fieldType:s,category:t||"g√©n√©ral"};console.log("üì¶ Corps de la requ√™te:",w);const g=await fetch("/api/ai/enhance-text",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(console.log("üì® R√©ponse re√ßue, status:",g.status),!g.ok){const C=await g.text();console.error("‚ùå Erreur HTTP:",g.status,C);let E=`Erreur ${g.status}`;if(g.status===429)E="Quota IA d√©pass√© - Essayez plus tard";else try{E=JSON.parse(C).error||C}catch{E=C||`Erreur ${g.status}`}throw new Error(E)}const v=await g.json();if(console.log("üìã Donn√©es re√ßues:",v),v.success&&v.data?.enhancedText)console.log("‚úÖ Suggestion re√ßue avec succ√®s"),v.data.enhancedText.length>j.trim().length*.8?(i(v.data.enhancedText),N(!0),q({title:"Texte am√©lior√© !",description:"L'IA a optimis√© votre texte"})):(console.warn("‚ö†Ô∏è Suggestion trop courte, conservation du texte original"),l("La suggestion g√©n√©r√©e semble incompl√®te"),q({title:"Suggestion Incompl√®te",description:"L'IA n'a pas pu am√©liorer le texte de mani√®re significative.",variant:"destructive"}));else{console.error("‚ùå R√©ponse invalide:",v);const C=v.error||"R√©ponse invalide du serveur";throw new Error(C)}}catch(w){console.error("Erreur suggestion texte:",w);const g=w instanceof Error?w.message:"Erreur inconnue";l(g),q({title:"Erreur",description:`IA temporairement indisponible: ${g}`,variant:"destructive"})}finally{c(!1)}},p=()=>{switch(s){case"title":return"Am√©liorer le titre";case"description":return"Enrichir la description";case"requirements":return"Pr√©ciser les exigences";default:return"Suggestion IA"}};return e.jsxs(L,{onClick:d,disabled:y||!j.trim(),variant:"outline",size:"sm",className:`bg-purple-50 hover:bg-purple-100 border-purple-200 text-purple-700 ${x}`,children:[y?e.jsx(se,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(le,{className:"w-4 h-4 mr-2"}),p()]})}function Pe({onComplete:j,onSubmit:s,isLoading:t,error:i}){const[,x]=ce(),{user:y}=Y(),{createMission:c,createTeamProject:q,isLoading:k}=ge(),[l,n]=m.useState(0);m.useRef(null);const N=t!==void 0?t:k,[d,p]=m.useState(null),{toast:w}=useToast(),[g,v]=m.useState(!1),[C,E]=m.useState(null),[b,R]=m.useState(null),[T,D]=m.useState(""),[a,f]=m.useState({title:"",description:"",budget:"",timeline:"",requirements:"",location:{address:"",lat:null,lng:null,radius:10},needsLocation:!1}),[A,B]=m.useState(null),[V,U]=m.useState(!1),[I,M]=m.useState({}),H=async()=>{try{const u={title:a.title,description:a.description,category:T,budget:a.budget,location:a.needsLocation?a.location.address:"Remote",urgency:"medium",requirements:a.requirements,isTeamMode:g};console.log("üöÄ Progressive Flow: Creating mission with hook");const S=g?await q({...u,teamSize:a.teamSize||3,requirements:a.teamRequirements}):await c(u);if(S.ok){if(console.log("‚úÖ Progressive Flow: Mission created via hook:",S),s){s(u);return}j&&j({...S.mission,isTeamMode:g,teamRequirements:S.teamRequirements}),x("/missions")}else throw new Error(S.error||"Erreur cr√©ation mission")}catch(u){throw console.error("‚ùå Progressive Flow: Creation error:",u),w({title:"Erreur",description:u.message||"Impossible de cr√©er la mission. Veuillez r√©essayer.",variant:"destructive"}),u}},re=async()=>{try{await H()}catch(u){console.error("Erreur lors de la cr√©ation:",u)}},ae=u=>LucideIcons[u.split("-").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join("")]||LucideIcons.Briefcase;m.useEffect(()=>{const u=setTimeout(()=>{},100);return()=>clearTimeout(u)},[l]);const ie=[()=>e.jsxs("div",{className:"text-center space-y-3 max-w-3xl mx-auto",children:[e.jsx("div",{className:"space-y-3 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-lg p-3 md:p-4 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsxs("p",{className:"text-base md:text-lg text-gray-900 font-semibold mb-1",children:[e.jsx("span",{className:"text-blue-600",children:"Swideal"})," place le client au c≈ìur du mod√®le."]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Notre approche repose sur deux leviers puissants :"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border-l-3 border-blue-500",children:[e.jsxs("h3",{className:"text-sm md:text-base font-semibold text-gray-900 mb-1 flex items-center justify-center",children:[e.jsx("span",{className:"inline-block w-5 h-5 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center mr-2 font-bold",children:"1"}),"L'ench√®re invers√©e"]}),e.jsx("p",{className:"text-xs md:text-sm text-gray-700 leading-snug",children:"Le client d√©crit son besoin et les prestataires rivalisent pour offrir le meilleur deal."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border-l-3 border-green-500 text-center",children:[e.jsxs("h3",{className:"text-sm md:text-base font-semibold text-gray-900 mb-1 flex items-center justify-center",children:[e.jsx("span",{className:"inline-block w-5 h-5 bg-green-500 text-white text-xs rounded-full flex items-center justify-center mr-2 font-bold",children:"2"}),"La mise en relation strat√©gique"]}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-700 leading-snug",children:["Connectez-vous directement √† la bonne personne gr√¢ce aux r√©seaux et connaissances partag√©es.",e.jsx("br",{}),"Toi aussi, valorise ton r√©seau"]})]})]}),e.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("p",{className:"text-xs md:text-sm text-gray-800 leading-snug text-center",children:[e.jsx("strong",{children:"Swideal"})," transforme la mise en relation en v√©ritable ",e.jsx("strong",{children:"art du deal"}),"."]})})]})}),e.jsx(L,{onClick:()=>n(0),className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium shadow-sm hover:shadow-md transition-all duration-200",size:"lg",children:"üöÄ D√©marrer"})]}),()=>e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("div",{className:"space-y-2 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 animate-bounce-in progressive-flow-title",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Cr√©ez votre mission en quelques clics"}),e.jsxs("p",{className:"text-gray-600 animate-slide-up progressive-flow-description",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["Publiez votre projet et recevez des propositions de ",e.jsx("span",{className:"text-green-600 font-semibold",children:"prestataires"})," qualifi√©s"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl mx-auto progressive-flow-grid",children:[e.jsx(F,{className:`cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-105 hover:-translate-y-1 group card-shine progressive-flow-card ${C==="client"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50/30"} ${d==="client"?"scale-95 ring-4 ring-blue-400 bg-blue-100 animate-pulse-glow":""}`,onClick:()=>{E("client"),p("client"),setTimeout(()=>{n(1),p(null)},400)},children:e.jsxs(z,{className:"p-6 text-center",children:[e.jsx(de,{className:`w-12 h-12 mx-auto mb-4 text-blue-600 transition-all duration-300 group-hover:scale-110 group-hover:rotate-3 ${d==="client"?"scale-125 animate-pulse text-blue-800":""}`}),e.jsxs("h3",{className:"text-xl font-semibold mb-2",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["üë®‚Äçüíº ",e.jsx("span",{className:"text-gray-900",children:"Je suis"})," ",e.jsx("span",{className:"text-blue-600",children:"Client"})]}),e.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-3",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["Trouvez le ",e.jsx("span",{className:"text-green-600 font-semibold",children:"prestataire"})," id√©al pour vos projets"]}),e.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:["AppelsPro r√©volutionne la mise en relation entre ",e.jsx("span",{className:"text-blue-600 font-medium",children:"clients"})," et ",e.jsx("span",{className:"text-green-600 font-medium",children:"prestataires"}),". Publiez votre projet et recevez des devis personnalis√©s en quelques heures."]})]})}),e.jsx(F,{className:`cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-105 hover:-translate-y-1 group card-shine progressive-flow-card ${C==="prestataire"?"ring-2 ring-green-500 bg-green-50":"hover:bg-green-50/30"} ${d==="prestataire"?"scale-95 ring-4 ring-green-400 bg-green-100 animate-pulse-glow":""}`,onClick:()=>{E("prestataire"),p("prestataire"),setTimeout(()=>{n(1),p(null)},400)},children:e.jsxs(z,{className:"p-6 text-center",children:[e.jsx(K,{className:`w-12 h-12 mx-auto mb-4 text-green-600 transition-all duration-300 group-hover:scale-110 group-hover:rotate-3 ${d==="prestataire"?"scale-125 animate-pulse text-green-800":""}`}),e.jsxs("h3",{className:"text-xl font-semibold mb-2",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["üõ†Ô∏è ",e.jsx("span",{className:"text-gray-900",children:"Je suis"})," ",e.jsx("span",{className:"text-green-600",children:"Prestataire"})]}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-3",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"D√©veloppez votre activit√© en tant que pro"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Acc√©dez √† de nouvelles opportunit√©s business sans prospection. R√©pondez aux appels d'offres qui correspondent √† vos comp√©tences."})]})})]})]}),()=>e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 progressive-flow-title",children:"Comment souhaitez-vous proc√©der ?"}),e.jsx("p",{className:"text-gray-600 progressive-flow-description",children:"S√©lectionnez la m√©thode qui vous convient le mieux"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl mx-auto progressive-flow-grid",children:[e.jsx(F,{className:`cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-105 hover:-translate-y-1 group card-shine progressive-flow-card ${b==="mise-en-relation"?"ring-2 ring-purple-500 bg-purple-50":"hover:bg-purple-50/30"} ${d==="mise-en-relation"?"scale-95 ring-4 ring-purple-400 bg-purple-100 animate-pulse-glow":""}`,onClick:()=>{R("mise-en-relation"),p("mise-en-relation"),setTimeout(()=>{n(2),p(null)},400)},children:e.jsxs(z,{className:"p-6 text-center",children:[e.jsx(K,{className:`w-12 h-12 mx-auto mb-4 text-purple-600 transition-all duration-300 group-hover:scale-110 group-hover:rotate-12 ${d==="mise-en-relation"?"scale-125 animate-pulse text-purple-800":""}`}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Mise en relation"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Contact direct avec des prestataires s√©lectionn√©s"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{variant:"secondary",children:"Contact imm√©diat"}),e.jsx($,{variant:"secondary",children:"Profils v√©rifi√©s"})]})]})}),e.jsx(F,{className:`cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-105 hover:-translate-y-1 group card-shine progressive-flow-card ${b==="appel-offres"?"ring-2 ring-orange-500 bg-orange-50":"hover:bg-orange-50/30"} ${d==="appel-offres"?"scale-95 ring-4 ring-orange-400 bg-orange-100 animate-pulse-glow":""}`,onClick:()=>{R("appel-offres"),p("appel-offres"),setTimeout(()=>{n(2),p(null)},400)},children:e.jsxs(z,{className:"p-6 text-center",children:[e.jsx(W,{className:`w-12 h-12 mx-auto mb-4 text-orange-600 transition-all duration-300 group-hover:scale-110 group-hover:rotate-12 ${d==="appel-offres"?"scale-125 animate-pulse text-orange-800":""}`}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Appel d'offres"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Recevez plusieurs propositions et choisissez la meilleure"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{variant:"secondary",children:"Ench√®re invers√©e"}),e.jsx($,{variant:"secondary",children:"+50 prestataires"})]})]})})]}),e.jsxs(L,{variant:"outline",onClick:()=>n(0),className:"mt-4",children:[e.jsx(ChevronLeft,{className:"w-4 h-4 mr-2"}),"Retour"]})]}),()=>{const u=b==="mise-en-relation"?G:Q,S=b==="mise-en-relation"?"expert":"projet";return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 animate-bounce-in progressive-flow-title",children:"Dans quel domaine ?"}),e.jsxs("p",{className:"text-gray-600 animate-slide-up progressive-flow-description",children:["S√©lectionnez la cat√©gorie qui correspond √† votre ",S]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 category-grid",children:u.map(h=>e.jsx(F,{className:`cursor-pointer transition-all duration-300 hover:shadow-lg hover:scale-105 hover:-translate-y-1 group card-shine ${T===h.id?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50/20"} ${d===h.id?"scale-95 ring-4 ring-blue-400 bg-blue-100 animate-pulse-glow":""}`,onClick:()=>{D(h.id),p(h.id),setTimeout(()=>{n(3),p(null)},400)},children:e.jsxs(z,{className:"p-4 text-center category-card",children:[e.jsx("div",{className:"mb-3",children:(()=>{const r=ae(h.icon);return e.jsx(r,{className:`w-8 h-8 mx-auto ${h.color} transition-all duration-300 group-hover:scale-110 group-hover:rotate-6 ${d===h.id?"scale-125 animate-pulse":""}`})})()}),e.jsx("h3",{className:"font-medium text-sm leading-tight",children:h.name}),h.description&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.description})]})},h.id))}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(L,{variant:"outline",onClick:()=>n(1),children:[e.jsx(ChevronLeft,{className:"w-4 h-4 mr-2"}),"Retour"]})})]})},()=>{const S=(b==="mise-en-relation"?G:Q).find(r=>r.id===T),h=b==="mise-en-relation"?"demande de contact":"projet";return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 animate-bounce-in progressive-flow-title",children:["D√©crivez votre ",h," ",S?.name]}),e.jsxs("p",{className:"text-gray-600 animate-slide-up progressive-flow-description",children:["Plus votre description est pr√©cise, ",b==="mise-en-relation"?"plus les experts seront adapt√©s":"meilleures seront les propositions"]})]}),e.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto progressive-flow-form",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx(xe,{id:"team-mode",checked:g,onCheckedChange:v}),e.jsx(me,{htmlFor:"team-mode",className:"text-blue-900 font-medium",children:"ü§ù Mode √©quipe - Diviser le projet en plusieurs sp√©cialit√©s"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Titre du ",h," *"]}),e.jsx(_,{currentText:a.title,fieldType:"title",category:T,onSuggestion:r=>{f(o=>({...o,title:r})),M(o=>({...o,title:!0}))},className:"text-xs"})]}),e.jsx(O,{placeholder:b==="mise-en-relation"?`Ex: Recherche ${S?.name.toLowerCase()} pour conseil juridique`:"Ex: Cr√©ation d'un site web e-commerce",value:a.title,onChange:r=>f(o=>({...o,title:r.target.value}))}),I.title&&e.jsx("div",{className:"mt-2",children:e.jsx(J,{phase:"brief_enhance",prompt:{field:"title",text:a.title},onFeedback:()=>M(r=>({...r,title:!1}))})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description d√©taill√©e *"}),e.jsx(_,{currentText:a.description,fieldType:"description",category:T,onSuggestion:r=>{f(o=>({...o,description:r})),M(o=>({...o,description:!0}))},className:"text-xs"})]}),e.jsx(Z,{placeholder:b==="mise-en-relation"?"D√©crivez le type de consultation recherch√©e, vos besoins sp√©cifiques, le contexte...":"D√©crivez pr√©cis√©ment votre besoin, vos objectifs, contraintes techniques...",rows:4,value:a.description,onChange:r=>f(o=>({...o,description:r.target.value}))}),I.description&&e.jsx("div",{className:"mt-2",children:e.jsx(J,{phase:"brief_enhance",prompt:{field:"description",text:a.description},onFeedback:()=>M(r=>({...r,description:!1}))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(te,{className:"w-4 h-4 inline mr-1"}),b==="mise-en-relation"?"Budget consultation (optionnel)":"Budget indicatif (optionnel)"]}),e.jsx(O,{placeholder:b==="mise-en-relation"?"Ex: 200 - 500 ‚Ç¨/heure":"Ex: 5 000 - 10 000 ‚Ç¨",value:a.budget,onChange:r=>f(o=>({...o,budget:r.target.value}))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Calendar,{className:"w-4 h-4 inline mr-1"}),"D√©lai souhait√© (optionnel)"]}),e.jsx(O,{placeholder:"Ex: 2-3 mois",value:a.timeline,onChange:r=>f(o=>({...o,timeline:r.target.value}))})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Exigences sp√©cifiques (optionnel)"}),e.jsx(_,{currentText:a.requirements,fieldType:"requirements",category:T,onSuggestion:r=>{f(o=>({...o,requirements:r})),M(o=>({...o,requirements:!0}))},className:"text-xs"})]}),e.jsx(Z,{placeholder:"Technologies requises, contraintes particuli√®res, livrables attendus...",rows:3,value:a.requirements,onChange:r=>f(o=>({...o,requirements:r.target.value}))}),I.requirements&&e.jsx("div",{className:"mt-2",children:e.jsx(J,{phase:"brief_enhance",prompt:{field:"requirements",text:a.requirements},onFeedback:()=>M(r=>({...r,requirements:!1}))})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(he,{title:a.title,description:a.description,category:T,onPriceSuggestion:r=>{const o=`${r.minPrice} - ${r.maxPrice} ‚Ç¨`;f(P=>({...P,budget:o})),B({type:"pricing",data:r}),U(!0)}}),V&&A&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"ü§ñ Comment trouvez-vous cette suggestion IA ?"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Votre retour nous aide √† am√©liorer nos suggestions"})]}),e.jsx(J,{phase:"brief_enhance",prompt:{title:a.title,description:a.description,category:T,suggestion:A},onFeedback:(r,o,P)=>{console.log("Feedback IA re√ßu:",{accepted:r,rating:o,edits:P}),U(!1),w({title:"Merci pour votre retour !",description:"Vos commentaires nous aident √† am√©liorer l'IA"})}})]})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(pe,{className:"w-5 h-5 mr-2 text-blue-600"}),"Localisation"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"remote",name:"location-type",checked:!a.needsLocation,onChange:()=>f(r=>({...r,needsLocation:!1,location:{...r.location,address:""}})),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"remote",className:"text-sm font-medium text-gray-700",children:"√Ä distance"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"onsite",name:"location-type",checked:a.needsLocation,onChange:()=>f(r=>({...r,needsLocation:!0})),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"onsite",className:"text-sm font-medium text-gray-700",children:"Intervention sur site"})]})]}),a.needsLocation&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Code postal (5 chiffres) *"}),e.jsx(O,{type:"text",placeholder:"Ex: 75001",pattern:"[0-9]{5}",maxLength:5,value:a.location.address,onChange:r=>{const o=r.target.value.replace(/[^0-9]/g,"").slice(0,5);f(P=>({...P,location:{...P.location,address:o}}))},className:"w-40"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Saisissez le code postal de l'intervention"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(L,{variant:"outline",onClick:()=>n(2),children:[e.jsx(ChevronLeft,{className:"w-4 h-4 mr-2"}),"Retour"]}),e.jsx(L,{className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 transform transition-all duration-300 hover:scale-105 hover:shadow-xl disabled:hover:scale-100 disabled:hover:shadow-none",disabled:!a.title.trim()||!a.description.trim()||a.needsLocation&&(!a.location.address||a.location.address.length!==5),onClick:re,loading:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Cr√©ation..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),g?"Cr√©er le projet √©quipe":"Publier la mission"]})})]})]})]})}];return e.jsx("div",{className:"w-full max-w-6xl mx-auto progressive-flow-container",children:e.jsxs("div",{className:"bg-transparent pb-24",children:[e.jsx("div",{className:"px-4 relative progressive-flow-step",children:ie[l+1]()}),l>=0&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50/5 via-indigo-50/5 to-purple-50/5 p-3 rounded-xl mt-6 mb-6 border border-blue-200/20 backdrop-blur-sm progressive-flow-progress",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["√âtape ",l+1," sur 4"]}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[Math.round((l+1)/4*100),"%"]})]}),e.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-gray-100 to-gray-200 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 rounded-full transition-all duration-700 ease-out shadow-sm relative",style:{width:`${(l+1)/4*100}%`},children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent rounded-full"})})}),e.jsx("div",{className:"flex justify-between mt-2",children:[1,2,3,4].map(u=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${u<=l+1?"bg-gradient-to-r from-blue-500 to-purple-500 shadow-sm":"bg-gray-300"}`}),e.jsx("span",{className:`text-xs mt-1 font-medium transition-colors duration-300 ${u<=l+1?"text-blue-600":"text-gray-400"}`,children:u})]},u))})]})]})})}export{Pe as P,ge as u};
