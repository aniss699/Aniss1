import{r as g,j as e}from"./ui-DaZ93cLC.js";import{u as Q}from"./useQuery-D9PcL-kM.js";import{d as E,e as V,f as H,g as _,L as C,I as O,B as p,h as G,D as A,i as B,j as P,k as M,V as re,l as z,C as I,b as $,m as U,U as K}from"./index-BCbN5iIX.js";import{a as S,g as te,f as k}from"./categories-DUi1-GTl.js";import{T as X}from"./textarea-B6_KM4aL.js";import{B as q}from"./badge-CoUKijwm.js";import{L as ae}from"./lucide-react-DuDAChui.js";import{A as ie}from"./availability-calendar-aH5Da0SD.js";import{M as J}from"./map-pin-PJSHdzD2.js";import{C as R}from"./calendar-Bk4IdCgW.js";import{M as T}from"./message-circle-DRjtGl36.js";import{P as le}from"./phone-IpJnegur.js";import{C as ne}from"./clock-DfxM6wlR.js";import{A as oe}from"./award-DLd9rm_l.js";import{S as W}from"./star-CP2-R7xt.js";import{C as ce}from"./circle-check-big-usk8155d.js";import{C as de}from"./circle-x-BXT641Hx.js";import{S as me}from"./smart-bid-analyzer-DmSHNbR6.js";import{E as xe}from"./euro-BffjyJg8.js";function pe({missionId:x,onSuccess:c}){const{user:d}=E(),{toast:l}=V(),u=H(),[s,j]=g.useState({price:"",timeline:"",proposal:""}),i=_({mutationFn:async a=>(await G("POST","/api/bids",a)).json(),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/missions",x]}),u.invalidateQueries({queryKey:["/api/missions"]}),u.invalidateQueries({queryKey:["/api/users",d?.id,"bids"]}),l({title:"Offre envoyée !",description:"Votre offre a été envoyée avec succès"}),j({price:"",timeline:"",proposal:""}),c()},onError:a=>{l({title:"Erreur",description:a.message||"Une erreur est survenue",variant:"destructive"})}}),r=a=>{if(a.preventDefault(),!s.price||!s.timeline||!s.proposal){l({title:"Champs requis",description:"Veuillez remplir tous les champs",variant:"destructive"});return}if(!d){l({title:"Connexion requise",description:"Vous devez être connecté pour postuler",variant:"destructive"});return}i.mutate({missionId:x,providerId:d.id,providerName:d.name,price:parseFloat(s.price),timeline:s.timeline,proposal:s.proposal,rating:d.rating||"5.0"})},m=(a,h)=>{j(f=>({...f,[a]:h}))};return!d||d.type!=="provider"?null:e.jsx("div",{className:"bg-white rounded-lg p-1",children:e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{htmlFor:"price",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"💰"}),e.jsx("span",{children:"Prix proposé (€)"})]}),e.jsx(O,{id:"price",type:"number",step:"0.01",min:"0",placeholder:"Ex: 2500",value:s.price,onChange:a=>m("price",a.target.value),className:"h-11 rounded-lg border-2 border-gray-200 focus:border-green-500 focus:ring-2 focus:ring-green-100 transition-colors",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{htmlFor:"timeline",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"⏱️"}),e.jsx("span",{children:"Délai de livraison"})]}),e.jsx(O,{id:"timeline",type:"text",placeholder:"Ex: 4 semaines",value:s.timeline,onChange:a=>m("timeline",a.target.value),className:"h-11 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition-colors",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{htmlFor:"proposal",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"📝"}),e.jsx("span",{children:"Décrivez votre proposition"})]}),e.jsx(X,{id:"proposal",placeholder:"Expliquez votre approche, votre expérience pertinente et ce que vous allez concrètement livrer pour cette mission...",value:s.proposal,onChange:a=>m("proposal",a.target.value),className:"min-h-[120px] rounded-lg border-2 border-gray-200 focus:border-purple-500 focus:ring-2 focus:ring-purple-100 resize-none transition-colors",required:!0})]}),e.jsx("div",{className:"pt-2",children:e.jsx(p,{type:"submit",className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-3 px-6 rounded-lg text-base shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",disabled:i.isPending,children:i.isPending?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Envoi en cours..."})]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"🚀"}),e.jsx("span",{children:"Envoyer ma candidature"})]})})})]})})}function ue({providerId:x,providerName:c,isOpen:d,onClose:l}){const{toast:u}=V(),{data:s,isLoading:j}=Q({queryKey:["/api/providers",x,"profile"],enabled:!!x&&d}),i=r=>Array.from({length:5},(m,a)=>e.jsx(W,{className:`w-4 h-4 ${a<r?"text-yellow-400 fill-current":"text-gray-300"}`},a));return!d||!x?null:e.jsx(A,{open:d,onOpenChange:l,children:e.jsxs(B,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(P,{children:e.jsx(M,{asChild:!0,children:e.jsx(re,{children:"Profil du prestataire"})})}),e.jsx("div",{className:"p-6"}),j?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):s?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),s.location||"Localisation non spécifiée"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"w-4 h-4 mr-1"}),"Membre depuis ",S(s.joinedAt)]})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center justify-end mb-2",children:[e.jsx("div",{className:"flex items-center mr-2",children:i(Math.round(parseFloat(s.rating)))}),e.jsx("span",{className:"text-xl font-bold",children:s.rating})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.totalProjects," projets réalisés"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.skills.map((r,m)=>e.jsx(q,{variant:"secondary",children:r},m))})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs(p,{className:"bg-blue-500 hover:bg-blue-600 text-white",onClick:()=>{window.location.href=`/messages?contact=${x}&name=${encodeURIComponent(c)}`},children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Message"]}),e.jsxs(p,{variant:"outline",className:"border-green-500 text-green-600 hover:bg-green-50",onClick:()=>{u({title:"Contacter le prestataire",description:`Appelez ${c} pour discuter du projet`})},children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Appeler"]}),e.jsxs(p,{className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white",onClick:()=>{u({title:"Réservation de créneau",description:`Fonctionnalité de réservation avec ${c} en cours de développement`})},children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Réserver un créneau"]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(z,{className:"w-5 h-5 mr-2"}),"Réalisations récentes"]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:s.portfolio.slice(0,4).map(r=>e.jsx(I,{children:e.jsxs($,{className:"p-4",children:[r.images.length>0&&e.jsx("img",{src:r.images[0],alt:r.title,className:"w-full h-32 object-cover rounded-lg mb-3"}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:r.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(q,{variant:"outline",children:r.category}),e.jsx("span",{className:"text-xs text-gray-500",children:S(r.completedAt)})]})]})},r.id))}),s.portfolio.length===0&&e.jsx("p",{className:"text-gray-500 text-center py-8",children:"Aucune réalisation disponible pour le moment"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ne,{className:"w-5 h-5 mr-2"}),"Disponibilités"]}),e.jsx(I,{children:e.jsx($,{className:"p-4",children:e.jsx(ie,{readOnly:!0,initialAvailability:s.availability||[]})})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(oe,{className:"w-5 h-5 mr-2"}),"Avis clients (",s.evaluations.length,")"]}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:s.evaluations.map(r=>e.jsx(I,{children:e.jsxs($,{className:"p-4",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-1",children:[i(r.rating),e.jsx("span",{className:"ml-2 font-medium",children:r.clientName})]}),e.jsx("span",{className:"text-xs text-gray-500",children:S(r.createdAt)})]})}),e.jsx("p",{className:"text-gray-700 mb-3",children:r.comment}),r.photos&&r.photos.length>0&&e.jsx("div",{className:"flex space-x-2",children:r.photos.slice(0,3).map((m,a)=>e.jsx("img",{src:m,alt:`Photo ${a+1}`,className:"w-16 h-16 object-cover rounded-lg"},a))})]})},r.id))}),s.evaluations.length===0&&e.jsx("p",{className:"text-gray-500 text-center py-8",children:"Aucun avis client pour le moment"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(p,{onClick:l,children:"Fermer"})})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Profil non trouvé"})})]})})}function he({bidId:x,bidderName:c,isOpen:d,onClose:l}){const{user:u}=E(),{toast:s}=V(),j=H(),[i,r]=g.useState(null),[m,a]=g.useState(""),h=_({mutationFn:async o=>(await G("POST","/api/bids/respond",o)).json(),onSuccess:()=>{j.invalidateQueries({queryKey:["/api/missions"]});const o=i==="accept"?"acceptée":i==="reject"?"déclinée":"en négociation";s({title:"Réponse envoyée !",description:`Votre réponse (${o}) a été envoyée au prestataire. Il recevra une notification.`}),setTimeout(()=>{alert(`Confirmation : Votre réponse "${o}" a bien été envoyée à ${c}. Un email de confirmation lui a été envoyé.`)},500),l(),r(null),a("")},onError:o=>{s({title:"Erreur",description:o.message||"Une erreur est survenue",variant:"destructive"})}}),f=o=>{if(o.preventDefault(),!i){s({title:"Action requise",description:"Veuillez choisir une action",variant:"destructive"});return}if(i==="negotiate"&&!m.trim()){s({title:"Message requis",description:"Veuillez ajouter un message pour négocier",variant:"destructive"});return}h.mutate({bidId:x,status:i,message:m.trim()||null,clientResponse:i})},N=o=>{switch(o){case"accept":return`Bonjour ${c},

Nous avons le plaisir de vous informer que votre offre a été retenue pour ce projet. Nous allons procéder à la mise en place du contrat.

Cordialement`;case"reject":return`Bonjour ${c},

Nous vous remercions pour votre offre. Malheureusement, nous avons décidé de retenir une autre proposition pour ce projet.

Cordialement`;case"negotiate":return`Bonjour ${c},

Votre offre nous intéresse. Cependant, nous aimerions discuter de certains points :

- 
- 

Êtes-vous ouvert à la négociation ?

Cordialement`}},b=o=>{r(o),a(N(o))};return e.jsx(A,{open:d,onOpenChange:l,children:e.jsxs(B,{className:"sm:max-w-2xl bg-white border shadow-lg",children:[e.jsx(P,{children:e.jsxs(M,{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(T,{className:"w-6 h-6 text-blue-500"}),"Répondre à l'offre de ",c]})}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Choisissez votre réponse :"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>b("accept"),className:`p-4 rounded-xl border-2 transition-all ${i==="accept"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-green-300"}`,children:[e.jsx(ce,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("div",{className:"font-semibold",children:"Accepter"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Retenir cette offre"})]}),e.jsxs("button",{type:"button",onClick:()=>b("negotiate"),className:`p-4 rounded-xl border-2 transition-all ${i==="negotiate"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx(T,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("div",{className:"font-semibold",children:"Négocier"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Demander des ajustements"})]}),e.jsxs("button",{type:"button",onClick:()=>b("reject"),className:`p-4 rounded-xl border-2 transition-all ${i==="reject"?"border-red-500 bg-red-50 text-red-700":"border-gray-200 hover:border-red-300"}`,children:[e.jsx(de,{className:"w-8 h-8 mx-auto mb-2 text-red-500"}),e.jsx("div",{className:"font-semibold",children:"Décliner"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Ne pas retenir"})]})]})]}),i&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{htmlFor:"message",className:"text-sm font-semibold text-gray-800",children:["Message à ",c]}),e.jsx(X,{id:"message",value:m,onChange:o=>a(o.target.value),placeholder:"Votre message...",className:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(p,{type:"button",variant:"outline",onClick:l,className:"flex-1",disabled:h.isPending,children:"Annuler"}),e.jsx(p,{type:"submit",className:"flex-1 bg-blue-500 hover:bg-blue-600",disabled:!i||h.isPending,children:h.isPending?"Envoi...":"Envoyer la réponse"})]})]})]})})}function ze({missionId:x,isOpen:c,onClose:d}){const{user:l}=E(),[u,s]=g.useState(null),[j,i]=g.useState(""),[r,m]=g.useState(null),[a,h]=g.useState(""),[f,N]=g.useState(!1),[b,o]=g.useState(!1),[y,Y]=g.useState({}),{data:t,isLoading:Z}=Q({queryKey:[`/api/missions/${x}`],enabled:!!x&&c});if(!t||Z)return e.jsx(A,{open:c,onOpenChange:d,children:e.jsxs(B,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto bg-white border-0 shadow-2xl",children:[e.jsxs(P,{children:[e.jsx(M,{children:"Chargement..."}),e.jsx(U,{children:"Chargement des détails de la mission en cours..."})]}),e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Chargement des détails de la mission..."})]})]})});const w=te(t.category),ee=w?(n=>ae[n.split("-").map(D=>D.charAt(0).toUpperCase()+D.slice(1)).join("")]||z)(w.icon):z,se=n=>{const v=parseFloat(n);return Array.from({length:5},(D,L)=>e.jsx(W,{className:`w-4 h-4 ${L<Math.floor(v)?"text-yellow-400 fill-current":"text-gray-300"}`},L))},F=[...t.bids].sort((n,v)=>parseFloat(n.price)-parseFloat(v.price));return e.jsxs(A,{open:c,onOpenChange:d,children:[e.jsxs(B,{className:"w-[95vw] max-w-4xl max-h-[90vh] overflow-y-auto p-0 bg-white border-0 shadow-2xl rounded-xl","aria-describedby":"mission-description",children:[e.jsxs(P,{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 rounded-t-xl",children:[e.jsx(M,{className:"text-xl sm:text-2xl font-bold pr-8 text-white",children:t.title}),e.jsxs(U,{className:"text-blue-100 mt-2",children:["Mission publiée par ",t.clientName," • Budget: ",k(t.budget||"0")," • ",t.bids.length," candidature",t.bids.length!==1?"s":""]})]}),e.jsxs("div",{className:"p-3 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"border-b pb-6",children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(ee,{className:`w-8 h-8 ${w?.color||"text-blue-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:t.title}),e.jsx(q,{className:"bg-green-100 text-green-700 border-green-200",children:w?.name||t.category})]}),e.jsxs("p",{className:"text-gray-500 mb-3",children:["Publié par ",e.jsx("span",{className:"font-medium text-blue-600",children:t.clientName})," • ",S(t.createdAt)]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.description})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(xe,{className:"w-4 h-4 text-green-600 mr-2"}),e.jsx("span",{className:"font-medium text-gray-700 text-sm",children:"Budget"})]}),e.jsx("div",{className:"text-lg font-bold text-green-600",children:k(t.budget||"0")})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(J,{className:"w-4 h-4 text-blue-600 mr-2"}),e.jsx("span",{className:"font-medium text-gray-700 text-sm",children:"Localisation"})]}),e.jsx("div",{className:"text-blue-600 font-medium text-sm",children:t.location||"Non spécifié"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(K,{className:"w-4 h-4 text-purple-600 mr-2"}),e.jsx("span",{className:"font-medium text-gray-700 text-sm",children:"Candidatures"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-600",children:t.bids.length})]})]})]}),l&&l.type==="provider"&&t.clientName!==l.name&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 sm:p-6 border-2 border-green-200 shadow-md mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"💼"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Postuler à cette mission"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Soumettez votre offre avec prix et délai"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(p,{onClick:()=>N(!f),className:"bg-primary hover:bg-primary/90",size:"lg",children:f?"Masquer le formulaire":"Soumettre une offre"}),e.jsx(p,{onClick:()=>o(!b),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",size:"lg",children:"🧠 Analyser avec l'IA"})]}),b&&e.jsx("div",{className:"mt-6",children:e.jsx(me,{missionTitle:t.title,missionDescription:t.description,missionBudget:parseFloat(t.budget||"0"),missionCategory:t.category,currentBid:y,providerProfile:{rating:4.5,completedProjects:25,skills:["React","Node.js","TypeScript"],portfolio:[]},competitorBids:t.bids,onOptimizedBidGenerated:n=>{Y(n),N(!0)}})}),f&&e.jsx("div",{className:"mt-6 p-6 bg-gray-50 rounded-lg border",children:e.jsx(pe,{missionId:t.id,onSuccess:()=>{N(!1),o(!1)},initialValues:y.proposal?y:void 0})})]})]}),l&&l.type==="provider"&&t.clientName===l.name&&e.jsx("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold",children:"ℹ️"})}),e.jsx("p",{className:"text-blue-700 font-medium",children:"Ceci est votre propre mission"})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Offres reçues (",t.bids.length,")"]}),F.length>0&&e.jsx("div",{className:"text-sm text-gray-500",children:"Triées par prix croissant"})]}),e.jsxs("div",{className:"space-y-4",children:[F.map((n,v)=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:n.providerName.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900 cursor-pointer hover:text-primary transition-colors",onClick:()=>{s(n.providerId),i(n.providerName)},children:n.providerName}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("div",{className:"flex items-center",children:se(n.rating||"5.0")}),e.jsxs("span",{className:"text-sm text-gray-600",children:[parseFloat(n.rating||"5.0").toFixed(1),"/5"]}),v===0&&F.length>1&&e.jsx(q,{className:"bg-green-100 text-green-700 text-xs",children:"Meilleure offre"})]})]})]})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:k(n.price)}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(R,{className:"w-4 h-4 mr-1"}),n.timeline]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg p-4 mb-4 border-l-4 border-blue-400",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:n.proposal})}),l&&t.clientName===l.name&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{onClick:()=>{m(n.id),h(n.providerName)},variant:"outline",className:"border-blue-500 text-blue-600 hover:bg-blue-50 font-semibold flex items-center gap-2",children:"💬 Répondre"}),e.jsx(p,{className:"bg-green-500 hover:bg-green-600 text-white font-semibold flex items-center gap-2",children:"✅ Accepter l'offre"})]})]},n.id)),t.bids.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(K,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Aucune offre reçue pour le moment"})]})]})]})]})]}),e.jsx(ue,{providerId:u,providerName:j,isOpen:!!u,onClose:()=>{s(null),i("")}}),e.jsx(he,{bidId:r,bidderName:a,isOpen:!!r,onClose:()=>{m(null),h("")}})]})}export{ze as M};
