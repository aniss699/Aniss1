import{r as u,j as e}from"./ui-BW6CElO3.js";import{u as v,d as w,B as j,A as N}from"./index-CxtXHfDv.js";import{P as S}from"./progressive-flow-jDp3PxTE.js";import{o as E,u as h,a as T,s as t,e as F,d as L,n as C}from"./types-B-FkpF08.js";import"./vendor-D3F3s8fL.js";import"./badge-BGZFvUEq.js";import"./textarea-DSzpUfKF.js";import"./activity-nxckIlKO.js";import"./dollar-sign-BFmEfB0E.js";import"./award-Ddkmokir.js";import"./book-open-CbZP6rmo.js";import"./calendar-xLC_OoPL.js";import"./switch-D1JCraXU.js";import"./index-DDShL7U6.js";import"./chevron-left-BRwO4HYj.js";import"./chevron-up-CEu3pwcc.js";import"./circle-alert-BvIYaxth.js";import"./circle-check-big-CNENF1J2.js";import"./circle-x-BDb0d2_y.js";import"./hand-Cv8bICaC.js";import"./clock-CUFtLysQ.js";import"./video-BeJMZJSu.js";import"./euro-CLze2VZq.js";import"./eye-CxvPHBd4.js";import"./filter-CqQLoD-8.js";import"./rocket-BxtJLJNo.js";import"./house-DOoIeBnk.js";import"./lightbulb-CU_xeH2l.js";import"./loader-circle-CJx-wNbS.js";import"./trophy-CSDC6-Ip.js";import"./mail-4ZrqBtG-.js";import"./map-pin-DSFgeo65.js";import"./message-circle-scxDnfDv.js";import"./settings-B98Ve4_n.js";import"./phone-DC_exGax.js";import"./refresh-cw-BoRsE5xt.js";import"./repeat-C4Yh60_6.js";import"./save-BaxHswMq.js";import"./send-C16denqL.js";import"./shield-ndFdkI8d.js";import"./square-pen-Ds5wvwXD.js";import"./star-B_DlsG9g.js";import"./thumbs-up-TJCwkBOW.js";import"./trash-2-CsBExvIX.js";import"./trending-up-Bn2h5Hl-.js";import"./triangle-alert-D1zMmvPr.js";import"./user-check-Do4pqZli.js";import"./wand-sparkles-BAV7Cb4-.js";import"./categories-Ci5EyH-Y.js";import"./feedback-buttons-CV1k0oqF.js";const O=E({title:t().min(1,"Le titre est requis"),description:t().min(10,"La description doit contenir au moins 10 caract√®res"),category:t().min(1,"La cat√©gorie est requise"),budget:h([t(),C()]).optional(),location:t().optional(),urgency:F(["low","medium","high"]).default("medium"),requirements:t().optional(),tags:T(t()).default([]),deadline:h([t(),L()]).optional()});function Fe(){const[,p]=v(),[g,l]=u.useState(!1),[x,c]=u.useState(null),{user:n}=w(),f=r=>p(r),y=async r=>{try{if(l(!0),c(null),!n||!n.id)throw new Error("Vous devez √™tre connect√© pour cr√©er une mission");const d={...O.parse(r),userId:n.id};console.log("üöÄ Frontend: Submitting validated mission data with user:",JSON.stringify(d,null,2));try{if(!(await fetch("/api/health")).ok)throw new Error("Service temporairement indisponible")}catch{throw new Error("Impossible de contacter le serveur")}const s=await fetch("/api/missions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});console.log("üì° Frontend: Response status:",s.status),console.log("üì° Frontend: Response headers:",Object.fromEntries(s.headers.entries()));const a=await s.text();if(console.log("üì° Frontend: Raw response:",a),!s.ok){let o="√âchec de la cr√©ation de mission";try{const m=JSON.parse(a);o=m.error||m.details||o}catch{o=a||o}throw new Error(o)}const b=JSON.parse(a);console.log("‚úÖ Frontend: Mission created successfully:",b),f("/missions")}catch(i){console.error("‚ùå Frontend: Error creating mission:",i),c(i instanceof Error?i.message:"√âchec de la cr√©ation de mission. Veuillez r√©essayer.")}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(j,{variant:"ghost",onClick:()=>p("/"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[e.jsx(N,{className:"w-4 h-4"}),"Retour √† l'accueil"]})}),e.jsxs("div",{className:"px-2 sm:px-0 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-200/20 via-indigo-200/15 to-purple-200/20 rounded-3xl blur-2xl transform -rotate-1 scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-indigo-100/30 via-purple-100/20 to-blue-100/25 rounded-3xl blur-xl transform rotate-1 scale-102"}),e.jsx("div",{className:"relative z-10",children:e.jsx(S,{onSubmit:y,isLoading:g,error:x,onComplete:r=>{console.log("Donn√©es du projet:",r)}})})]})]})})}export{Fe as default};
