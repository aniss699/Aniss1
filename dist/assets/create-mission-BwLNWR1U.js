import{r as x,j as e}from"./ui-BcXBiFQq.js";import{f as g,C as v,a as j,h as f,b as N,L as d,I as p,B as h,u as y}from"./index-1c4F__iu.js";import{T as C}from"./textarea-CiTICwK9.js";import{S as M}from"./switch-BSeEaC2F.js";import"./vendor-D3F3s8fL.js";import"./index-DIYLGAU4.js";function E({onComplete:a,onCancel:o}){const{toast:n}=g(),[r,m]=x.useState(!1),[s,u]=x.useState({title:"",description:"",budget:"",isTeamMode:!1}),b=async t=>{if(t.preventDefault(),!s.title.trim()||!s.description.trim()){n({title:"Erreur",description:"Le titre et la description sont obligatoires",variant:"destructive"});return}m(!0);try{console.log("üöÄ Envoi mission simplifi√©e:",s);const i=await fetch("/api/missions/simple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:s.title,description:s.description,budget:s.budget?parseInt(s.budget):void 0,isTeamMode:s.isTeamMode})}),c=await i.json();if(!i.ok)throw new Error(c.error||"Erreur lors de la cr√©ation");n({title:"‚úÖ Mission cr√©√©e !",description:`Mission "${s.title}" cr√©√©e avec succ√®s`}),a&&a(c),u({title:"",description:"",budget:"",isTeamMode:!1})}catch(i){console.error("Erreur cr√©ation mission:",i),n({title:"Erreur",description:i.message||"Impossible de cr√©er la mission",variant:"destructive"})}finally{m(!1)}},l=(t,i)=>{u(c=>({...c,[t]:i}))};return e.jsxs(v,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs(j,{children:[e.jsx(f,{className:"text-2xl font-bold text-center",children:"üéØ Cr√©er une Mission"}),e.jsx("p",{className:"text-gray-600 text-center",children:"D√©crivez votre projet en quelques mots, nous nous occupons du reste !"})]}),e.jsx(N,{children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"title",className:"text-base font-medium",children:"Titre de votre mission *"}),e.jsx(p,{id:"title",placeholder:"Ex: D√©velopper une application mobile de gestion de t√¢ches",value:s.title,onChange:t=>l("title",t.target.value),className:"text-base",maxLength:100}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.title.length,"/100 caract√®res"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"description",className:"text-base font-medium",children:"Description d√©taill√©e *"}),e.jsx(C,{id:"description",placeholder:"D√©crivez votre projet, vos besoins, les fonctionnalit√©s attendues...",value:s.description,onChange:t=>l("description",t.target.value),className:"min-h-[120px] text-base",maxLength:1e3}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.description.length,"/1000 caract√®res"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"budget",className:"text-base font-medium",children:"Budget approximatif (‚Ç¨)"}),e.jsx(p,{id:"budget",type:"number",placeholder:"Ex: 2000",value:s.budget,onChange:t=>l("budget",t.target.value),className:"text-base",min:"0",max:"100000"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Optionnel - Nous vous aiderons √† estimer le budget si n√©cessaire"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg",children:[e.jsx(M,{id:"teamMode",checked:s.isTeamMode,onCheckedChange:t=>l("isTeamMode",t)}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"teamMode",className:"text-base font-medium",children:"Mission en √©quipe"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Cherchez-vous une √©quipe de plusieurs freelances ?"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[o&&e.jsx(h,{type:"button",variant:"outline",onClick:o,className:"flex-1",children:"Annuler"}),e.jsx(h,{type:"submit",disabled:r,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Cr√©ation..."]}):"üöÄ Cr√©er ma mission"})]})]})})]})}function k(){const[,a]=y(),o=r=>{console.log("‚úÖ Mission cr√©√©e avec succ√®s:",r),a("/marketplace")},n=r=>{console.error("‚ùå Erreur lors de la cr√©ation de mission:",r)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Cr√©er une nouvelle mission"}),e.jsx("p",{className:"text-gray-600",children:"D√©crivez votre projet en quelques mots et trouvez le bon prestataire"})]}),e.jsx(E,{onSuccess:o,onError:n}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("button",{onClick:()=>a("/create-mission/advanced"),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Besoin de plus d'options ? Utiliser le mode avanc√©"})})]})})}export{k as CreateMissionPage};
