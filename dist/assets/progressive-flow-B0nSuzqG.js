import{r as c,j as e}from"./ui-BW6CElO3.js";import{d as Y,f as ee,B as L,C as F,a as ne,h as oe,b as $,S as le,u as ce,U as de,Z as K,T as W,L as me,I as O}from"./index-CwCxvjUT.js";import{T as Z}from"./textarea-C7WbzAEt.js";import{B as A}from"./badge-Dc9NUtUZ.js";import{b as G,C as Q}from"./categories-Ci5EyH-Y.js";import{R as se}from"./refresh-cw-DMdR3ay0.js";import{E as te}from"./euro-29Da9J0i.js";import{T as ue}from"./trending-up-DJenjIoi.js";import{A as J}from"./feedback-buttons-BXvMEhK8.js";import{S as xe}from"./switch-BJlzBbPw.js";import{M as pe}from"./map-pin-Dp98Amjz.js";class X{static async createMission(s){try{const t=this.validateInput(s);if(!t.isValid)return{ok:!1,error:t.errors.join(", ")};const i=this.formatMissionData(s);console.log("üöÄ MissionService: Creating mission with data:",i);const d=await fetch("/api/missions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!d.ok){const l=await d.json().catch(()=>({}));throw new Error(l.error||`HTTP ${d.status}`)}const w=await d.json();return{ok:!0,id:w.id?.toString(),mission:w}}catch(t){return console.error("‚ùå MissionService: Error creating mission:",t),{ok:!1,error:t instanceof Error?t.message:"Erreur inconnue"}}}static async createTeamProject(s){try{const t={...s,isTeamMode:!0,team:{isTeamMission:!0,teamSize:s.timeline&&parseInt(s.timeline)||3}},i=await this.createMission(t);return{ok:i.ok,id:i.id,error:i.error,teamRequirements:i.mission?.teamRequirements||[]}}catch(t){return{ok:!1,error:t instanceof Error?t.message:"Erreur cr√©ation √©quipe"}}}static formatMissionData(s){let t=1e3;if(s.budget)if(typeof s.budget=="string"){const i=parseFloat(s.budget.replace(/[^\d.]/g,""));t=isNaN(i)?1e3:Math.max(i,10)}else t=Math.max(s.budget,10);return{title:s.title.trim(),description:s.description.trim(),category:s.category||"developpement",budget:t,location:s.location?.trim()||"Remote",userId:s.userId||1,urgency:s.urgency||"medium",requirements:s.requirements?.trim()||void 0,isTeamMode:s.isTeamMode||!1,postal_code:s.needsLocation&&s.location?.length===5?s.location:void 0}}static validateInput(s){const t=[];if((!s.title||s.title.trim().length<3)&&t.push("Le titre doit contenir au moins 3 caract√®res"),s.title&&s.title.length>500&&t.push("Le titre ne peut pas d√©passer 500 caract√®res"),(!s.description||s.description.trim().length<10)&&t.push("La description doit contenir au moins 10 caract√®res"),s.description&&s.description.length>5e3&&t.push("La description ne peut pas d√©passer 5000 caract√®res"),s.category||t.push("La cat√©gorie est requise"),s.budget){const i=typeof s.budget=="string"?parseFloat(s.budget.replace(/[^\d.]/g,"")):s.budget;(isNaN(i)||i<10)&&t.push("Le budget minimum est de 10‚Ç¨")}return{isValid:t.length===0,errors:t}}static async getMissions(){try{const s=await fetch("/api/missions");if(!s.ok)throw new Error(`HTTP ${s.status}`);return await s.json()}catch(s){return console.error("‚ùå Error fetching missions:",s),[]}}static async getMission(s){try{const t=await fetch(`/api/missions/${s}`);return t.ok?await t.json():null}catch(t){return console.error(`‚ùå Error fetching mission ${s}:`,t),null}}static async testConnection(){try{return(await fetch("/api/missions/health")).ok}catch(s){return console.error("‚ùå Connection test failed:",s),!1}}}function ge(){const[N,s]=c.useState(!1),[t,i]=c.useState(null),{user:d}=Y(),w=c.useCallback(async S=>{try{if(s(!0),i(null),!d?.id){const m={ok:!1,error:"Vous devez √™tre connect√© pour cr√©er une mission"};return i(m.error),m}const g={...S,userId:d.id};console.log("üéØ useMissionCreation: Creating mission for user",d.id);const n=await X.createMission(g);return!n.ok&&n.error&&i(n.error),n}catch(g){const n=g instanceof Error?g.message:"Erreur inconnue";return i(n),{ok:!1,error:n}}finally{s(!1)}},[d]),l=c.useCallback(async S=>{try{if(s(!0),i(null),!d?.id){const m={ok:!1,error:"Vous devez √™tre connect√© pour cr√©er un projet d'√©quipe"};return i(m.error),m}const g={...S,userId:d.id,isTeamMode:!0};console.log("üë• useMissionCreation: Creating team project for user",d.id);const n=await X.createTeamProject(g);return!n.ok&&n.error&&i(n.error),n}catch(g){const n=g instanceof Error?g.message:"Erreur cr√©ation √©quipe";return i(n),{ok:!1,error:n}}finally{s(!1)}},[d]),T=c.useCallback(()=>{i(null)},[]);return{isLoading:N,error:t,createMission:w,createTeamProject:l,clearError:T}}function he({title:N,description:s,category:t,onPriceSuggestion:i}){const[d,w]=c.useState(!1),[l,T]=c.useState(null),{toast:S}=ee(),g=async()=>{if(!N||!s||!t){S({title:"Informations manquantes",description:"Veuillez remplir le titre, la description et la cat√©gorie",variant:"destructive"});return}w(!0);try{await new Promise(u=>setTimeout(u,1500));const j=n(N,s,t);T(j),i?.(j),S({title:"Suggestion de prix g√©n√©r√©e !",description:"L'IA a analys√© votre projet et propose une fourchette de prix"})}catch(j){console.error("Erreur suggestion prix:",j),S({title:"Erreur",description:"Impossible de g√©n√©rer la suggestion de prix",variant:"destructive"})}finally{w(!1)}},n=(j,u,p)=>{const x={d√©veloppement:{base:500,min:.7,max:1.8,factors:["Complexit√© technique","D√©lais","Technologies"]},design:{base:300,min:.6,max:1.6,factors:["Cr√©ativit√©","R√©visions","Supports"]},marketing:{base:400,min:.5,max:2,factors:["Audience","Canaux","Dur√©e campagne"]},conseil:{base:600,min:.8,max:2.2,factors:["Expertise","Secteur","Urgence"]},travaux:{base:800,min:.9,max:1.5,factors:["Mat√©riaux","Surface","Complexit√©"]},services:{base:250,min:.6,max:1.4,factors:["Dur√©e","Fr√©quence","Sp√©cialisation"]}},y=x[p]||x.services,C=u.toLowerCase().split(" "),b=["complexe","avanc√©","personnalis√©","sur-mesure","int√©gration","api","base de donn√©es","responsive","mobile"].filter(E=>C.some(_=>_.includes(E))).length,D=Math.min(u.length/150,1.5),k=Math.min(b*.2,1),R=1+D*.3+k*.4,a=y.base,v=1.1,z=a*R*v,B=Math.round(z*y.min),U=Math.round(z*y.max),V=Math.round((B+U)/2),I={minPrice:B,maxPrice:U,averagePrice:V,factors:y.factors||["Analyse complexit√©","March√© local","Standards secteur"],confidence:.82+Math.random()*.15,baseCalculation:{basePrice:a,complexityFactor:R,marketAdjustment:v,sampleSize:Math.floor(200+Math.random()*150),keywordsFound:b,descriptionLength:u.length}};return console.log("Prix sugg√©r√© avec d√©tails:",I),I},m=j=>j>=.8?"text-green-600":j>=.6?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(L,{onClick:g,disabled:d,variant:"outline",className:"w-full bg-blue-50 hover:bg-blue-100 border-blue-200",children:[d?e.jsx(se,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(te,{className:"w-4 h-4 mr-2"}),"Sugg√©rer un prix IA"]}),l&&e.jsxs(F,{className:"border-blue-200 bg-blue-50/50",children:[e.jsx(ne,{children:e.jsxs(oe,{className:"text-lg flex items-center text-blue-800",children:[e.jsx(ue,{className:"w-5 h-5 mr-2"}),"Suggestion de prix IA",e.jsxs(A,{className:`ml-2 ${m(l.confidence)}`,children:[Math.round(l.confidence*100),"% confiance"]})]})}),e.jsxs($,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Minimum"}),e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[l.minPrice,"‚Ç¨"]})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-100 rounded-lg border-2 border-blue-300",children:[e.jsx("p",{className:"text-sm text-blue-700",children:"Recommand√©"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-800",children:[l.averagePrice,"‚Ç¨"]})]}),e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Maximum"}),e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[l.maxPrice,"‚Ç¨"]})]})]}),l.factors&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Facteurs analys√©s :"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.factors.map((j,u)=>e.jsx(A,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:j},u))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üßÆ"}),"Comment ce prix a √©t√© calcul√©"]}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Prix de base :"})," ",l.baseCalculation?.basePrice?.toLocaleString("fr-FR")||"N/A",'‚Ç¨ (tarif moyen pour la cat√©gorie "',t,'")']})]}),l.baseCalculation?.complexityFactor&&e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-orange-400 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Ajustement complexit√© :"})," x",l.baseCalculation.complexityFactor.toFixed(2),"(analyse du contenu et des exigences techniques)"]})]}),l.baseCalculation?.marketAdjustment&&e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Facteur march√© :"})," x",l.baseCalculation.marketAdjustment.toFixed(2),"(demande et concurrence actuelles)"]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Fourchette finale :"})," Calcul algorithmique bas√© sur ",l.baseCalculation?.sampleSize||"200+"," projets similaires"]})]}),e.jsx("div",{className:"mt-3 p-3 bg-white/60 rounded border-l-4 border-blue-400",children:e.jsxs("p",{className:"text-xs italic",children:["üí° ",e.jsx("strong",{children:"M√©thodologie :"})," Notre IA analyse la description, identifie les mots-cl√©s techniques, √©value la complexit√© et applique des coefficients bas√©s sur les donn√©es du march√© fran√ßais pour cette cat√©gorie."]})})]})]})]})]})]})]})}function H({currentText:N,fieldType:s,category:t="",onSuggestion:i,className:d=""}){const[w,l]=c.useState(!1),{toast:T}=ee(),[S,g]=c.useState(null),[n,m]=c.useState(!1),j=async()=>{if(console.log("üéØ D√©clenchement suggestion pour:",{text:N.substring(0,50),fieldType:s,category:t}),!N.trim()){console.warn("‚ùå Texte vide fourni"),g("Aucun texte √† am√©liorer");return}l(!0),g(null),m(!1);try{console.log("üì° Envoi requ√™te /api/ai/enhance-text...");const p={text:N.trim(),fieldType:s,category:t||"g√©n√©ral"};console.log("üì¶ Corps de la requ√™te:",p);const x=await fetch("/api/ai/enhance-text",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(console.log("üì® R√©ponse re√ßue, status:",x.status),!x.ok){const C=await x.text();console.error("‚ùå Erreur HTTP:",x.status,C);let q=`Erreur ${x.status}`;if(x.status===429)q="Quota IA d√©pass√© - Essayez plus tard";else try{q=JSON.parse(C).error||C}catch{q=C||`Erreur ${x.status}`}throw new Error(q)}const y=await x.json();if(console.log("üìã Donn√©es re√ßues:",y),y.success&&y.data?.enhancedText)console.log("‚úÖ Suggestion re√ßue avec succ√®s"),y.data.enhancedText.length>N.trim().length*.8?(i(y.data.enhancedText),m(!0),T({title:"Texte am√©lior√© !",description:"L'IA a optimis√© votre texte"})):(console.warn("‚ö†Ô∏è Suggestion trop courte, conservation du texte original"),g("La suggestion g√©n√©r√©e semble incompl√®te"),T({title:"Suggestion Incompl√®te",description:"L'IA n'a pas pu am√©liorer le texte de mani√®re significative.",variant:"destructive"}));else{console.error("‚ùå R√©ponse invalide:",y);const C=y.error||"R√©ponse invalide du serveur";throw new Error(C)}}catch(p){console.error("Erreur suggestion texte:",p);const x=p instanceof Error?p.message:"Erreur inconnue";g(x),T({title:"Erreur",description:`IA temporairement indisponible: ${x}`,variant:"destructive"})}finally{l(!1)}},u=()=>{switch(s){case"title":return"Am√©liorer le titre";case"description":return"Enrichir la description";case"requirements":return"Pr√©ciser les exigences";default:return"Suggestion IA"}};return e.jsxs(L,{onClick:j,disabled:w||!N.trim(),variant:"outline",size:"sm",className:`bg-purple-50 hover:bg-purple-100 border-purple-200 text-purple-700 ${d}`,children:[w?e.jsx(se,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(le,{className:"w-4 h-4 mr-2"}),u()]})}function Pe({onComplete:N,onSubmit:s,isLoading:t,error:i}){const[,d]=ce(),{user:w}=Y(),{createMission:l,createTeamProject:T,isLoading:S}=ge(),{toast:g}=useToast(),[n,m]=c.useState(0);c.useRef(null);const j=t!==void 0?t:S,[u,p]=c.useState(null),[x,y]=c.useState(!1),[C,q]=c.useState(null),[b,D]=c.useState(null),[k,R]=c.useState(""),[a,v]=c.useState({title:"",description:"",budget:"",timeline:"",requirements:"",location:{address:"",lat:null,lng:null,radius:10},needsLocation:!1}),[z,B]=c.useState(null),[U,V]=c.useState(!1),[I,E]=c.useState({}),_=async()=>{const h={title:a.title,description:a.description,category:k,budget:a.budget,location:a.needsLocation?a.location.address:"Remote",urgency:"medium",requirements:a.requirements,isTeamMode:x};console.log("üöÄ Progressive Flow: Creating mission with hook");const M=x?await T(h):await l(h);if(M.ok){if(console.log("‚úÖ Progressive Flow: Mission created successfully"),s){s(h);return}N&&N({...M.mission,isTeamMode:x}),d("/missions")}return M},re=async()=>{try{await _()}catch(h){console.error("Erreur lors de la cr√©ation:",h)}},ae=h=>LucideIcons[h.split("-").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join("")]||LucideIcons.Briefcase;c.useEffect(()=>{const h=setTimeout(()=>{},100);return()=>clearTimeout(h)},[n]);const ie=[()=>e.jsxs("div",{className:"text-center space-y-3 max-w-3xl mx-auto",children:[e.jsx("div",{className:"space-y-3 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-lg p-3 md:p-4 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsxs("p",{className:"text-base md:text-lg text-gray-900 font-semibold mb-1",children:[e.jsx("span",{className:"text-blue-600",children:"Swideal"})," place le client au c≈ìur du mod√®le."]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Notre approche repose sur deux leviers puissants :"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border-l-3 border-blue-500",children:[e.jsxs("h3",{className:"text-sm md:text-base font-semibold text-gray-900 mb-1 flex items-center justify-center",children:[e.jsx("span",{className:"inline-block w-5 h-5 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center mr-2 font-bold",children:"1"}),"L'ench√®re invers√©e"]}),e.jsx("p",{className:"text-xs md:text-sm text-gray-700 leading-snug",children:"Le client d√©crit son besoin et les prestataires rivalisent pour offrir le meilleur deal."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border-l-3 border-green-500 text-center",children:[e.jsxs("h3",{className:"text-sm md:text-base font-semibold text-gray-900 mb-1 flex items-center justify-center",children:[e.jsx("span",{className:"inline-block w-5 h-5 bg-green-500 text-white text-xs rounded-full flex items-center justify-center mr-2 font-bold",children:"2"}),"La mise en relation strat√©gique"]}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-700 leading-snug",children:["Connectez-vous directement √† la bonne personne gr√¢ce aux r√©seaux et connaissances partag√©es.",e.jsx("br",{}),"Toi aussi, valorise ton r√©seau"]})]})]}),e.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("p",{className:"text-xs md:text-sm text-gray-800 leading-snug text-center",children:[e.jsx("strong",{children:"Swideal"})," transforme la mise en relation en v√©ritable ",e.jsx("strong",{children:"art du deal"}),"."]})})]})}),e.jsx(L,{onClick:()=>m(0),className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium shadow-sm hover:shadow-md transition-all duration-200",size:"lg",children:"üöÄ D√©marrer"})]}),()=>e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("div",{className:"space-y-2 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 animate-bounce-in progressive-flow-title",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Cr√©ez votre mission en quelques clics"}),e.jsxs("p",{className:"text-gray-600 animate-slide-up progressive-flow-description",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["Publiez votre projet et recevez des propositions de ",e.jsx("span",{className:"text-green-600 font-semibold",children:"prestataires"})," qualifi√©s"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl mx-auto progressive-flow-grid",children:[e.jsx(F,{className:`cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-105 hover:-translate-y-1 group card-shine progressive-flow-card ${C==="client"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50/30"} ${u==="client"?"scale-95 ring-4 ring-blue-400 bg-blue-100 animate-pulse-glow":""}`,onClick:()=>{q("client"),p("client"),setTimeout(()=>{m(1),p(null)},400)},children:e.jsxs($,{className:"p-6 text-center",children:[e.jsx(de,{className:`w-12 h-12 mx-auto mb-4 text-blue-600 transition-all duration-300 group-hover:scale-110 group-hover:rotate-3 ${u==="client"?"scale-125 animate-pulse text-blue-800":""}`}),e.jsxs("h3",{className:"text-xl font-semibold mb-2",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["üë®‚Äçüíº ",e.jsx("span",{className:"text-gray-900",children:"Je suis"})," ",e.jsx("span",{className:"text-blue-600",children:"Client"})]}),e.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-3",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["Trouvez le ",e.jsx("span",{className:"text-green-600 font-semibold",children:"prestataire"})," id√©al pour vos projets"]}),e.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:["AppelsPro r√©volutionne la mise en relation entre ",e.jsx("span",{className:"text-blue-600 font-medium",children:"clients"})," et ",e.jsx("span",{className:"text-green-600 font-medium",children:"prestataires"}),". Publiez votre projet et recevez des devis personnalis√©s en quelques heures."]})]})}),e.jsx(F,{className:`cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-105 hover:-translate-y-1 group card-shine progressive-flow-card ${C==="prestataire"?"ring-2 ring-green-500 bg-green-50":"hover:bg-green-50/30"} ${u==="prestataire"?"scale-95 ring-4 ring-green-400 bg-green-100 animate-pulse-glow":""}`,onClick:()=>{q("prestataire"),p("prestataire"),setTimeout(()=>{m(1),p(null)},400)},children:e.jsxs($,{className:"p-6 text-center",children:[e.jsx(K,{className:`w-12 h-12 mx-auto mb-4 text-green-600 transition-all duration-300 group-hover:scale-110 group-hover:rotate-3 ${u==="prestataire"?"scale-125 animate-pulse text-green-800":""}`}),e.jsxs("h3",{className:"text-xl font-semibold mb-2",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["üõ†Ô∏è ",e.jsx("span",{className:"text-gray-900",children:"Je suis"})," ",e.jsx("span",{className:"text-green-600",children:"Prestataire"})]}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-3",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"D√©veloppez votre activit√© en tant que pro"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Acc√©dez √† de nouvelles opportunit√©s business sans prospection. R√©pondez aux appels d'offres qui correspondent √† vos comp√©tences."})]})})]})]}),()=>e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 progressive-flow-title",children:"Comment souhaitez-vous proc√©der ?"}),e.jsx("p",{className:"text-gray-600 progressive-flow-description",children:"S√©lectionnez la m√©thode qui vous convient le mieux"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl mx-auto progressive-flow-grid",children:[e.jsx(F,{className:`cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-105 hover:-translate-y-1 group card-shine progressive-flow-card ${b==="mise-en-relation"?"ring-2 ring-purple-500 bg-purple-50":"hover:bg-purple-50/30"} ${u==="mise-en-relation"?"scale-95 ring-4 ring-purple-400 bg-purple-100 animate-pulse-glow":""}`,onClick:()=>{D("mise-en-relation"),p("mise-en-relation"),setTimeout(()=>{m(2),p(null)},400)},children:e.jsxs($,{className:"p-6 text-center",children:[e.jsx(K,{className:`w-12 h-12 mx-auto mb-4 text-purple-600 transition-all duration-300 group-hover:scale-110 group-hover:rotate-12 ${u==="mise-en-relation"?"scale-125 animate-pulse text-purple-800":""}`}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Mise en relation"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Contact direct avec des prestataires s√©lectionn√©s"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{variant:"secondary",children:"Contact imm√©diat"}),e.jsx(A,{variant:"secondary",children:"Profils v√©rifi√©s"})]})]})}),e.jsx(F,{className:`cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-105 hover:-translate-y-1 group card-shine progressive-flow-card ${b==="appel-offres"?"ring-2 ring-orange-500 bg-orange-50":"hover:bg-orange-50/30"} ${u==="appel-offres"?"scale-95 ring-4 ring-orange-400 bg-orange-100 animate-pulse-glow":""}`,onClick:()=>{D("appel-offres"),p("appel-offres"),setTimeout(()=>{m(2),p(null)},400)},children:e.jsxs($,{className:"p-6 text-center",children:[e.jsx(W,{className:`w-12 h-12 mx-auto mb-4 text-orange-600 transition-all duration-300 group-hover:scale-110 group-hover:rotate-12 ${u==="appel-offres"?"scale-125 animate-pulse text-orange-800":""}`}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Appel d'offres"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Recevez plusieurs propositions et choisissez la meilleure"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{variant:"secondary",children:"Ench√®re invers√©e"}),e.jsx(A,{variant:"secondary",children:"+50 prestataires"})]})]})})]}),e.jsxs(L,{variant:"outline",onClick:()=>m(0),className:"mt-4",children:[e.jsx(ChevronLeft,{className:"w-4 h-4 mr-2"}),"Retour"]})]}),()=>{const h=b==="mise-en-relation"?G:Q,M=b==="mise-en-relation"?"expert":"projet";return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 animate-bounce-in progressive-flow-title",children:"Dans quel domaine ?"}),e.jsxs("p",{className:"text-gray-600 animate-slide-up progressive-flow-description",children:["S√©lectionnez la cat√©gorie qui correspond √† votre ",M]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 category-grid",children:h.map(f=>e.jsx(F,{className:`cursor-pointer transition-all duration-300 hover:shadow-lg hover:scale-105 hover:-translate-y-1 group card-shine ${k===f.id?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50/20"} ${u===f.id?"scale-95 ring-4 ring-blue-400 bg-blue-100 animate-pulse-glow":""}`,onClick:()=>{R(f.id),p(f.id),setTimeout(()=>{m(3),p(null)},400)},children:e.jsxs($,{className:"p-4 text-center category-card",children:[e.jsx("div",{className:"mb-3",children:(()=>{const r=ae(f.icon);return e.jsx(r,{className:`w-8 h-8 mx-auto ${f.color} transition-all duration-300 group-hover:scale-110 group-hover:rotate-6 ${u===f.id?"scale-125 animate-pulse":""}`})})()}),e.jsx("h3",{className:"font-medium text-sm leading-tight",children:f.name}),f.description&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.description})]})},f.id))}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(L,{variant:"outline",onClick:()=>m(1),children:[e.jsx(ChevronLeft,{className:"w-4 h-4 mr-2"}),"Retour"]})})]})},()=>{const M=(b==="mise-en-relation"?G:Q).find(r=>r.id===k),f=b==="mise-en-relation"?"demande de contact":"projet";return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 animate-bounce-in progressive-flow-title",children:["D√©crivez votre ",f," ",M?.name]}),e.jsxs("p",{className:"text-gray-600 animate-slide-up progressive-flow-description",children:["Plus votre description est pr√©cise, ",b==="mise-en-relation"?"plus les experts seront adapt√©s":"meilleures seront les propositions"]})]}),e.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto progressive-flow-form",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx(xe,{id:"team-mode",checked:x,onCheckedChange:y}),e.jsx(me,{htmlFor:"team-mode",className:"text-blue-900 font-medium",children:"ü§ù Mode √©quipe - Diviser le projet en plusieurs sp√©cialit√©s"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Titre du ",f," *"]}),e.jsx(H,{currentText:a.title,fieldType:"title",category:k,onSuggestion:r=>{v(o=>({...o,title:r})),E(o=>({...o,title:!0}))},className:"text-xs"})]}),e.jsx(O,{placeholder:b==="mise-en-relation"?`Ex: Recherche ${M?.name.toLowerCase()} pour conseil juridique`:"Ex: Cr√©ation d'un site web e-commerce",value:a.title,onChange:r=>v(o=>({...o,title:r.target.value}))}),I.title&&e.jsx("div",{className:"mt-2",children:e.jsx(J,{phase:"brief_enhance",prompt:{field:"title",text:a.title},onFeedback:()=>E(r=>({...r,title:!1}))})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description d√©taill√©e *"}),e.jsx(H,{currentText:a.description,fieldType:"description",category:k,onSuggestion:r=>{v(o=>({...o,description:r})),E(o=>({...o,description:!0}))},className:"text-xs"})]}),e.jsx(Z,{placeholder:b==="mise-en-relation"?"D√©crivez le type de consultation recherch√©e, vos besoins sp√©cifiques, le contexte...":"D√©crivez pr√©cis√©ment votre besoin, vos objectifs, contraintes techniques...",rows:4,value:a.description,onChange:r=>v(o=>({...o,description:r.target.value}))}),I.description&&e.jsx("div",{className:"mt-2",children:e.jsx(J,{phase:"brief_enhance",prompt:{field:"description",text:a.description},onFeedback:()=>E(r=>({...r,description:!1}))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(te,{className:"w-4 h-4 inline mr-1"}),b==="mise-en-relation"?"Budget consultation (optionnel)":"Budget indicatif (optionnel)"]}),e.jsx(O,{placeholder:b==="mise-en-relation"?"Ex: 200 - 500 ‚Ç¨/heure":"Ex: 5 000 - 10 000 ‚Ç¨",value:a.budget,onChange:r=>v(o=>({...o,budget:r.target.value}))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Calendar,{className:"w-4 h-4 inline mr-1"}),"D√©lai souhait√© (optionnel)"]}),e.jsx(O,{placeholder:"Ex: 2-3 mois",value:a.timeline,onChange:r=>v(o=>({...o,timeline:r.target.value}))})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Exigences sp√©cifiques (optionnel)"}),e.jsx(H,{currentText:a.requirements,fieldType:"requirements",category:k,onSuggestion:r=>{v(o=>({...o,requirements:r})),E(o=>({...o,requirements:!0}))},className:"text-xs"})]}),e.jsx(Z,{placeholder:"Technologies requises, contraintes particuli√®res, livrables attendus...",rows:3,value:a.requirements,onChange:r=>v(o=>({...o,requirements:r.target.value}))}),I.requirements&&e.jsx("div",{className:"mt-2",children:e.jsx(J,{phase:"brief_enhance",prompt:{field:"requirements",text:a.requirements},onFeedback:()=>E(r=>({...r,requirements:!1}))})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(he,{title:a.title,description:a.description,category:k,onPriceSuggestion:r=>{const o=`${r.minPrice} - ${r.maxPrice} ‚Ç¨`;v(P=>({...P,budget:o})),B({type:"pricing",data:r}),V(!0)}}),U&&z&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"ü§ñ Comment trouvez-vous cette suggestion IA ?"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Votre retour nous aide √† am√©liorer nos suggestions"})]}),e.jsx(J,{phase:"brief_enhance",prompt:{title:a.title,description:a.description,category:k,suggestion:z},onFeedback:(r,o,P)=>{console.log("Feedback IA re√ßu:",{accepted:r,rating:o,edits:P}),V(!1),g({title:"Merci pour votre retour !",description:"Vos commentaires nous aident √† am√©liorer l'IA"})}})]})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(pe,{className:"w-5 h-5 mr-2 text-blue-600"}),"Localisation"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"remote",name:"location-type",checked:!a.needsLocation,onChange:()=>v(r=>({...r,needsLocation:!1,location:{...r.location,address:""}})),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"remote",className:"text-sm font-medium text-gray-700",children:"√Ä distance"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"onsite",name:"location-type",checked:a.needsLocation,onChange:()=>v(r=>({...r,needsLocation:!0})),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"onsite",className:"text-sm font-medium text-gray-700",children:"Intervention sur site"})]})]}),a.needsLocation&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Code postal (5 chiffres) *"}),e.jsx(O,{type:"text",placeholder:"Ex: 75001",pattern:"[0-9]{5}",maxLength:5,value:a.location.address,onChange:r=>{const o=r.target.value.replace(/[^0-9]/g,"").slice(0,5);v(P=>({...P,location:{...P.location,address:o}}))},className:"w-40"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Saisissez le code postal de l'intervention"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(L,{variant:"outline",onClick:()=>m(2),children:[e.jsx(ChevronLeft,{className:"w-4 h-4 mr-2"}),"Retour"]}),e.jsx(L,{className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 transform transition-all duration-300 hover:scale-105 hover:shadow-xl disabled:hover:scale-100 disabled:hover:shadow-none",disabled:!a.title.trim()||!a.description.trim()||a.needsLocation&&(!a.location.address||a.location.address.length!==5),onClick:re,loading:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Cr√©ation..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),x?"Cr√©er le projet √©quipe":"Publier la mission"]})})]})]})]})}];return e.jsx("div",{className:"w-full max-w-6xl mx-auto progressive-flow-container",children:e.jsxs("div",{className:"bg-transparent pb-24",children:[e.jsx("div",{className:"px-4 relative progressive-flow-step",children:ie[n+1]()}),n>=0&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50/5 via-indigo-50/5 to-purple-50/5 p-3 rounded-xl mt-6 mb-6 border border-blue-200/20 backdrop-blur-sm progressive-flow-progress",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["√âtape ",n+1," sur 4"]}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[Math.round((n+1)/4*100),"%"]})]}),e.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-gray-100 to-gray-200 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 rounded-full transition-all duration-700 ease-out shadow-sm relative",style:{width:`${(n+1)/4*100}%`},children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent rounded-full"})})}),e.jsx("div",{className:"flex justify-between mt-2",children:[1,2,3,4].map(h=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${h<=n+1?"bg-gradient-to-r from-blue-500 to-purple-500 shadow-sm":"bg-gray-300"}`}),e.jsx("span",{className:`text-xs mt-1 font-medium transition-colors duration-300 ${h<=n+1?"text-blue-600":"text-gray-400"}`,children:h})]},h))})]})]})})}export{Pe as P,ge as u};
