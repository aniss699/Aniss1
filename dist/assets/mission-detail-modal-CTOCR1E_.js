import{r as d,j as e,u as k,G as He,c as We,P as W,d as K,e as L,f as D,k as Ve}from"./ui-B2DK2E4p.js";import{u as fe}from"./useQuery-Bl6CYmTw.js";import{d as se,f as le,e as ge,g as be,i as ve,L as U,I as me,B as w,D as I,j as O,k as ae,l as ne,V as Ue,m as je,C as Z,b as J,n as we,o as qe,X as $e,U as xe,T as he,Z as Xe}from"./index-BIgZd0T1.js";import{a as q,g as Ye,f as V}from"./categories-Ci5EyH-Y.js";import{T as Ne}from"./textarea-DKs_aICq.js";import{B as _}from"./badge-DPyqDm-b.js";import{T as Ke,a as Qe,b as ee,c as te}from"./tabs-Bptbx_1x.js";import{A as Ge}from"./availability-calendar-BQXnVppS.js";import{M as ye}from"./map-pin-CQSSzHJ5.js";import{C as re}from"./calendar-qdgvnVj9.js";import{M as H}from"./message-circle-BdGBP4PQ.js";import{P as Ze}from"./phone-CoKNnfEv.js";import{C as Se}from"./clock-g90AB8re.js";import{A as Ce}from"./award-BGV-nX3_.js";import{S as Pe}from"./star-oG82mznw.js";import{C as Je}from"./circle-check-big-BT5Rh2as.js";import{C as et}from"./circle-x-CJH84OBq.js";import{S as tt}from"./smart-bid-analyzer-4QFWlhLl.js";import{c as rt}from"./index-BdQq_4o_.js";import{C as st}from"./circle-alert-N-wsuC2z.js";import{C as lt}from"./chevron-left-CjzQo8f1.js";import{E as at}from"./eye-CEWN6pyg.js";import{E as nt}from"./euro-Bz6bw6ed.js";import{T as ot}from"./trending-up-y6n_u_aE.js";import{U as ue}from"./user-check-BPFJ53tS.js";function it({missionId:t,onSuccess:l}){const{user:r}=se(),{toast:a}=le(),n=ge(),[s,m]=d.useState({price:"",timeline:"",proposal:""}),i=be({mutationFn:async c=>(await ve("POST","/api/bids",c)).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/missions",t]}),n.invalidateQueries({queryKey:["/api/missions"]}),n.invalidateQueries({queryKey:["/api/users",r?.id,"bids"]}),a({title:"Offre envoyée !",description:"Votre offre a été envoyée avec succès"}),m({price:"",timeline:"",proposal:""}),l()},onError:c=>{a({title:"Erreur",description:c.message||"Une erreur est survenue",variant:"destructive"})}}),o=c=>{if(c.preventDefault(),!s.price||!s.timeline||!s.proposal){a({title:"Champs requis",description:"Veuillez remplir tous les champs",variant:"destructive"});return}if(!r){a({title:"Connexion requise",description:"Vous devez être connecté pour postuler",variant:"destructive"});return}i.mutate({missionId:t,providerId:r.id,providerName:r.name,price:parseFloat(s.price),timeline:s.timeline,proposal:s.proposal,rating:r.rating||"5.0"})},h=(c,p)=>{m(u=>({...u,[c]:p}))};return!r||r.type!=="provider"?null:e.jsx("div",{className:"bg-white rounded-lg p-1",children:e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"price",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"💰"}),e.jsx("span",{children:"Prix proposé (€)"})]}),e.jsx(me,{id:"price",type:"number",step:"0.01",min:"0",placeholder:"Ex: 2500",value:s.price,onChange:c=>h("price",c.target.value),className:"h-11 rounded-lg border-2 border-gray-200 focus:border-green-500 focus:ring-2 focus:ring-green-100 transition-colors",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"timeline",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"⏱️"}),e.jsx("span",{children:"Délai de livraison"})]}),e.jsx(me,{id:"timeline",type:"text",placeholder:"Ex: 4 semaines",value:s.timeline,onChange:c=>h("timeline",c.target.value),className:"h-11 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition-colors",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"proposal",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"📝"}),e.jsx("span",{children:"Décrivez votre proposition"})]}),e.jsx(Ne,{id:"proposal",placeholder:"Expliquez votre approche, votre expérience pertinente et ce que vous allez concrètement livrer pour cette mission...",value:s.proposal,onChange:c=>h("proposal",c.target.value),className:"min-h-[120px] rounded-lg border-2 border-gray-200 focus:border-purple-500 focus:ring-2 focus:ring-purple-100 resize-none transition-colors",required:!0})]}),e.jsx("div",{className:"pt-2",children:e.jsx(w,{type:"submit",className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-3 px-6 rounded-lg text-base shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",disabled:i.isPending,children:i.isPending?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Envoi en cours..."})]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"🚀"}),e.jsx("span",{children:"Envoyer ma candidature"})]})})})]})})}function ct({providerId:t,providerName:l,isOpen:r,onClose:a}){const{toast:n}=le(),{data:s,isLoading:m}=fe({queryKey:["/api/providers",t,"profile"],enabled:!!t&&r}),i=o=>Array.from({length:5},(h,c)=>e.jsx(Pe,{className:`w-4 h-4 ${c<o?"text-yellow-400 fill-current":"text-gray-300"}`},c));return!r||!t?null:e.jsx(I,{open:r,onOpenChange:a,children:e.jsxs(O,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ae,{children:e.jsx(ne,{asChild:!0,children:e.jsx(Ue,{children:"Profil du prestataire"})})}),e.jsx("div",{className:"p-6"}),m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):s?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ye,{className:"w-4 h-4 mr-1"}),s.location||"Localisation non spécifiée"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"w-4 h-4 mr-1"}),"Membre depuis ",q(s.joinedAt)]})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center justify-end mb-2",children:[e.jsx("div",{className:"flex items-center mr-2",children:i(Math.round(parseFloat(s.rating)))}),e.jsx("span",{className:"text-xl font-bold",children:s.rating})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.totalProjects," projets réalisés"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.skills.map((o,h)=>e.jsx(_,{variant:"secondary",children:o},h))})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs(w,{className:"bg-blue-500 hover:bg-blue-600 text-white",onClick:()=>{window.location.href=`/messages?contact=${t}&name=${encodeURIComponent(l)}`},children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Message"]}),e.jsxs(w,{variant:"outline",className:"border-green-500 text-green-600 hover:bg-green-50",onClick:()=>{n({title:"Contacter le prestataire",description:`Appelez ${l} pour discuter du projet`})},children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Appeler"]}),e.jsxs(w,{className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white",onClick:()=>{n({title:"Réservation de créneau",description:`Fonctionnalité de réservation avec ${l} en cours de développement`})},children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Réserver un créneau"]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(je,{className:"w-5 h-5 mr-2"}),"Réalisations récentes"]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:s.portfolio.slice(0,4).map(o=>e.jsx(Z,{children:e.jsxs(J,{className:"p-4",children:[o.images.length>0&&e.jsx("img",{src:o.images[0],alt:o.title,className:"w-full h-32 object-cover rounded-lg mb-3"}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:o.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:o.description}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(_,{variant:"outline",children:o.category}),e.jsx("span",{className:"text-xs text-gray-500",children:q(o.completedAt)})]})]})},o.id))}),s.portfolio.length===0&&e.jsx("p",{className:"text-gray-500 text-center py-8",children:"Aucune réalisation disponible pour le moment"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Se,{className:"w-5 h-5 mr-2"}),"Disponibilités"]}),e.jsx(Z,{children:e.jsx(J,{className:"p-4",children:e.jsx(Ge,{readOnly:!0,initialAvailability:s.availability||[]})})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ce,{className:"w-5 h-5 mr-2"}),"Avis clients (",s.evaluations.length,")"]}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:s.evaluations.map(o=>e.jsx(Z,{children:e.jsxs(J,{className:"p-4",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-1",children:[i(o.rating),e.jsx("span",{className:"ml-2 font-medium",children:o.clientName})]}),e.jsx("span",{className:"text-xs text-gray-500",children:q(o.createdAt)})]})}),e.jsx("p",{className:"text-gray-700 mb-3",children:o.comment}),o.photos&&o.photos.length>0&&e.jsx("div",{className:"flex space-x-2",children:o.photos.slice(0,3).map((h,c)=>e.jsx("img",{src:h,alt:`Photo ${c+1}`,className:"w-16 h-16 object-cover rounded-lg"},c))})]})},o.id))}),s.evaluations.length===0&&e.jsx("p",{className:"text-gray-500 text-center py-8",children:"Aucun avis client pour le moment"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(w,{onClick:a,children:"Fermer"})})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Profil non trouvé"})})]})})}function dt({bidId:t,bidderName:l,isOpen:r,onClose:a}){const{user:n}=se(),{toast:s}=le(),m=ge(),[i,o]=d.useState(null),[h,c]=d.useState(""),p=be({mutationFn:async b=>(await ve("POST","/api/bids/respond",b)).json(),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/missions"]});const b=i==="accept"?"acceptée":i==="reject"?"déclinée":"en négociation";s({title:"Réponse envoyée !",description:`Votre réponse (${b}) a été envoyée au prestataire. Il recevra une notification.`}),setTimeout(()=>{alert(`Confirmation : Votre réponse "${b}" a bien été envoyée à ${l}. Un email de confirmation lui a été envoyé.`)},500),a(),o(null),c("")},onError:b=>{s({title:"Erreur",description:b.message||"Une erreur est survenue",variant:"destructive"})}}),u=b=>{if(b.preventDefault(),!i){s({title:"Action requise",description:"Veuillez choisir une action",variant:"destructive"});return}if(i==="negotiate"&&!h.trim()){s({title:"Message requis",description:"Veuillez ajouter un message pour négocier",variant:"destructive"});return}p.mutate({bidId:t,status:i,message:h.trim()||null,clientResponse:i})},g=b=>{switch(b){case"accept":return`Bonjour ${l},

Nous avons le plaisir de vous informer que votre offre a été retenue pour ce projet. Nous allons procéder à la mise en place du contrat.

Cordialement`;case"reject":return`Bonjour ${l},

Nous vous remercions pour votre offre. Malheureusement, nous avons décidé de retenir une autre proposition pour ce projet.

Cordialement`;case"negotiate":return`Bonjour ${l},

Votre offre nous intéresse. Cependant, nous aimerions discuter de certains points :

- 
- 

Êtes-vous ouvert à la négociation ?

Cordialement`}},j=b=>{o(b),c(g(b))};return e.jsx(I,{open:r,onOpenChange:a,children:e.jsxs(O,{className:"sm:max-w-2xl bg-white border shadow-lg",children:[e.jsx(ae,{children:e.jsxs(ne,{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(H,{className:"w-6 h-6 text-blue-500"}),"Répondre à l'offre de ",l]})}),e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Choisissez votre réponse :"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>j("accept"),className:`p-4 rounded-xl border-2 transition-all ${i==="accept"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-green-300"}`,children:[e.jsx(Je,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("div",{className:"font-semibold",children:"Accepter"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Retenir cette offre"})]}),e.jsxs("button",{type:"button",onClick:()=>j("negotiate"),className:`p-4 rounded-xl border-2 transition-all ${i==="negotiate"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx(H,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("div",{className:"font-semibold",children:"Négocier"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Demander des ajustements"})]}),e.jsxs("button",{type:"button",onClick:()=>j("reject"),className:`p-4 rounded-xl border-2 transition-all ${i==="reject"?"border-red-500 bg-red-50 text-red-700":"border-gray-200 hover:border-red-300"}`,children:[e.jsx(et,{className:"w-8 h-8 mx-auto mb-2 text-red-500"}),e.jsx("div",{className:"font-semibold",children:"Décliner"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Ne pas retenir"})]})]})]}),i&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"message",className:"text-sm font-semibold text-gray-800",children:["Message à ",l]}),e.jsx(Ne,{id:"message",value:h,onChange:b=>c(b.target.value),placeholder:"Votre message...",className:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(w,{type:"button",variant:"outline",onClick:a,className:"flex-1",disabled:p.isPending,children:"Annuler"}),e.jsx(w,{type:"submit",className:"flex-1 bg-blue-500 hover:bg-blue-600",disabled:!i||p.isPending,children:p.isPending?"Envoi...":"Envoyer la réponse"})]})]})]})})}function mt(t,l){return d.useReducer((r,a)=>l[r][a]??r,t)}var oe="ScrollArea",[Ae,Kt]=We(oe),[xt,y]=Ae(oe),Ee=d.forwardRef((t,l)=>{const{__scopeScrollArea:r,type:a="hover",dir:n,scrollHideDelay:s=600,...m}=t,[i,o]=d.useState(null),[h,c]=d.useState(null),[p,u]=d.useState(null),[g,j]=d.useState(null),[b,T]=d.useState(null),[C,f]=d.useState(0),[M,A]=d.useState(0),[z,E]=d.useState(!1),[N,R]=d.useState(!1),x=k(l,S=>o(S)),v=He(n);return e.jsx(xt,{scope:r,type:a,dir:v,scrollHideDelay:s,scrollArea:i,viewport:h,onViewportChange:c,content:p,onContentChange:u,scrollbarX:g,onScrollbarXChange:j,scrollbarXEnabled:z,onScrollbarXEnabledChange:E,scrollbarY:b,onScrollbarYChange:T,scrollbarYEnabled:N,onScrollbarYEnabledChange:R,onCornerWidthChange:f,onCornerHeightChange:A,children:e.jsx(W.div,{dir:v,...m,ref:x,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":M+"px",...t.style}})})});Ee.displayName=oe;var Te="ScrollAreaViewport",Re=d.forwardRef((t,l)=>{const{__scopeScrollArea:r,children:a,nonce:n,...s}=t,m=y(Te,r),i=d.useRef(null),o=k(l,i,m.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(W.div,{"data-radix-scroll-area-viewport":"",...s,ref:o,style:{overflowX:m.scrollbarXEnabled?"scroll":"hidden",overflowY:m.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:m.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});Re.displayName=Te;var P="ScrollAreaScrollbar",ie=d.forwardRef((t,l)=>{const{forceMount:r,...a}=t,n=y(P,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:m}=n,i=t.orientation==="horizontal";return d.useEffect(()=>(i?s(!0):m(!0),()=>{i?s(!1):m(!1)}),[i,s,m]),n.type==="hover"?e.jsx(ht,{...a,ref:l,forceMount:r}):n.type==="scroll"?e.jsx(ut,{...a,ref:l,forceMount:r}):n.type==="auto"?e.jsx(De,{...a,ref:l,forceMount:r}):n.type==="always"?e.jsx(ce,{...a,ref:l}):null});ie.displayName=P;var ht=d.forwardRef((t,l)=>{const{forceMount:r,...a}=t,n=y(P,t.__scopeScrollArea),[s,m]=d.useState(!1);return d.useEffect(()=>{const i=n.scrollArea;let o=0;if(i){const h=()=>{window.clearTimeout(o),m(!0)},c=()=>{o=window.setTimeout(()=>m(!1),n.scrollHideDelay)};return i.addEventListener("pointerenter",h),i.addEventListener("pointerleave",c),()=>{window.clearTimeout(o),i.removeEventListener("pointerenter",h),i.removeEventListener("pointerleave",c)}}},[n.scrollArea,n.scrollHideDelay]),e.jsx(K,{present:r||s,children:e.jsx(De,{"data-state":s?"visible":"hidden",...a,ref:l})})}),ut=d.forwardRef((t,l)=>{const{forceMount:r,...a}=t,n=y(P,t.__scopeScrollArea),s=t.orientation==="horizontal",m=G(()=>o("SCROLL_END"),100),[i,o]=mt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(i==="idle"){const h=window.setTimeout(()=>o("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(h)}},[i,n.scrollHideDelay,o]),d.useEffect(()=>{const h=n.viewport,c=s?"scrollLeft":"scrollTop";if(h){let p=h[c];const u=()=>{const g=h[c];p!==g&&(o("SCROLL"),m()),p=g};return h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,s,o,m]),e.jsx(K,{present:r||i!=="hidden",children:e.jsx(ce,{"data-state":i==="hidden"?"hidden":"visible",...a,ref:l,onPointerEnter:L(t.onPointerEnter,()=>o("POINTER_ENTER")),onPointerLeave:L(t.onPointerLeave,()=>o("POINTER_LEAVE"))})})}),De=d.forwardRef((t,l)=>{const r=y(P,t.__scopeScrollArea),{forceMount:a,...n}=t,[s,m]=d.useState(!1),i=t.orientation==="horizontal",o=G(()=>{if(r.viewport){const h=r.viewport.offsetWidth<r.viewport.scrollWidth,c=r.viewport.offsetHeight<r.viewport.scrollHeight;m(i?h:c)}},10);return B(r.viewport,o),B(r.content,o),e.jsx(K,{present:a||s,children:e.jsx(ce,{"data-state":s?"visible":"hidden",...n,ref:l})})}),ce=d.forwardRef((t,l)=>{const{orientation:r="vertical",...a}=t,n=y(P,t.__scopeScrollArea),s=d.useRef(null),m=d.useRef(0),[i,o]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=ke(i.viewport,i.content),c={...a,sizes:i,onSizesChange:o,hasThumb:h>0&&h<1,onThumbChange:u=>s.current=u,onThumbPointerUp:()=>m.current=0,onThumbPointerDown:u=>m.current=u};function p(u,g){return jt(u,m.current,i,g)}return r==="horizontal"?e.jsx(pt,{...c,ref:l,onThumbPositionChange:()=>{if(n.viewport&&s.current){const u=n.viewport.scrollLeft,g=pe(u,i,n.dir);s.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:u=>{n.viewport&&(n.viewport.scrollLeft=u)},onDragScroll:u=>{n.viewport&&(n.viewport.scrollLeft=p(u,n.dir))}}):r==="vertical"?e.jsx(ft,{...c,ref:l,onThumbPositionChange:()=>{if(n.viewport&&s.current){const u=n.viewport.scrollTop,g=pe(u,i);s.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:u=>{n.viewport&&(n.viewport.scrollTop=u)},onDragScroll:u=>{n.viewport&&(n.viewport.scrollTop=p(u))}}):null}),pt=d.forwardRef((t,l)=>{const{sizes:r,onSizesChange:a,...n}=t,s=y(P,t.__scopeScrollArea),[m,i]=d.useState(),o=d.useRef(null),h=k(l,o,s.onScrollbarXChange);return d.useEffect(()=>{o.current&&i(getComputedStyle(o.current))},[o]),e.jsx(ze,{"data-orientation":"horizontal",...n,ref:h,sizes:r,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Q(r)+"px",...t.style},onThumbPointerDown:c=>t.onThumbPointerDown(c.x),onDragScroll:c=>t.onDragScroll(c.x),onWheelScroll:(c,p)=>{if(s.viewport){const u=s.viewport.scrollLeft+c.deltaX;t.onWheelScroll(u),Fe(u,p)&&c.preventDefault()}},onResize:()=>{o.current&&s.viewport&&m&&a({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:o.current.clientWidth,paddingStart:Y(m.paddingLeft),paddingEnd:Y(m.paddingRight)}})}})}),ft=d.forwardRef((t,l)=>{const{sizes:r,onSizesChange:a,...n}=t,s=y(P,t.__scopeScrollArea),[m,i]=d.useState(),o=d.useRef(null),h=k(l,o,s.onScrollbarYChange);return d.useEffect(()=>{o.current&&i(getComputedStyle(o.current))},[o]),e.jsx(ze,{"data-orientation":"vertical",...n,ref:h,sizes:r,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Q(r)+"px",...t.style},onThumbPointerDown:c=>t.onThumbPointerDown(c.y),onDragScroll:c=>t.onDragScroll(c.y),onWheelScroll:(c,p)=>{if(s.viewport){const u=s.viewport.scrollTop+c.deltaY;t.onWheelScroll(u),Fe(u,p)&&c.preventDefault()}},onResize:()=>{o.current&&s.viewport&&m&&a({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:o.current.clientHeight,paddingStart:Y(m.paddingTop),paddingEnd:Y(m.paddingBottom)}})}})}),[gt,Le]=Ae(P),ze=d.forwardRef((t,l)=>{const{__scopeScrollArea:r,sizes:a,hasThumb:n,onThumbChange:s,onThumbPointerUp:m,onThumbPointerDown:i,onThumbPositionChange:o,onDragScroll:h,onWheelScroll:c,onResize:p,...u}=t,g=y(P,r),[j,b]=d.useState(null),T=k(l,x=>b(x)),C=d.useRef(null),f=d.useRef(""),M=g.viewport,A=a.content-a.viewport,z=D(c),E=D(o),N=G(p,10);function R(x){if(C.current){const v=x.clientX-C.current.left,S=x.clientY-C.current.top;h({x:v,y:S})}}return d.useEffect(()=>{const x=v=>{const S=v.target;j?.contains(S)&&z(v,A)};return document.addEventListener("wheel",x,{passive:!1}),()=>document.removeEventListener("wheel",x,{passive:!1})},[M,j,A,z]),d.useEffect(E,[a,E]),B(j,N),B(g.content,N),e.jsx(gt,{scope:r,scrollbar:j,hasThumb:n,onThumbChange:D(s),onThumbPointerUp:D(m),onThumbPositionChange:E,onThumbPointerDown:D(i),children:e.jsx(W.div,{...u,ref:T,style:{position:"absolute",...u.style},onPointerDown:L(t.onPointerDown,x=>{x.button===0&&(x.target.setPointerCapture(x.pointerId),C.current=j.getBoundingClientRect(),f.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),R(x))}),onPointerMove:L(t.onPointerMove,R),onPointerUp:L(t.onPointerUp,x=>{const v=x.target;v.hasPointerCapture(x.pointerId)&&v.releasePointerCapture(x.pointerId),document.body.style.webkitUserSelect=f.current,g.viewport&&(g.viewport.style.scrollBehavior=""),C.current=null})})})}),X="ScrollAreaThumb",_e=d.forwardRef((t,l)=>{const{forceMount:r,...a}=t,n=Le(X,t.__scopeScrollArea);return e.jsx(K,{present:r||n.hasThumb,children:e.jsx(bt,{ref:l,...a})})}),bt=d.forwardRef((t,l)=>{const{__scopeScrollArea:r,style:a,...n}=t,s=y(X,r),m=Le(X,r),{onThumbPositionChange:i}=m,o=k(l,p=>m.onThumbChange(p)),h=d.useRef(void 0),c=G(()=>{h.current&&(h.current(),h.current=void 0)},100);return d.useEffect(()=>{const p=s.viewport;if(p){const u=()=>{if(c(),!h.current){const g=wt(p,i);h.current=g,i()}};return i(),p.addEventListener("scroll",u),()=>p.removeEventListener("scroll",u)}},[s.viewport,c,i]),e.jsx(W.div,{"data-state":m.hasThumb?"visible":"hidden",...n,ref:o,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:L(t.onPointerDownCapture,p=>{const g=p.target.getBoundingClientRect(),j=p.clientX-g.left,b=p.clientY-g.top;m.onThumbPointerDown({x:j,y:b})}),onPointerUp:L(t.onPointerUp,m.onThumbPointerUp)})});_e.displayName=X;var de="ScrollAreaCorner",Be=d.forwardRef((t,l)=>{const r=y(de,t.__scopeScrollArea),a=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&a?e.jsx(vt,{...t,ref:l}):null});Be.displayName=de;var vt=d.forwardRef((t,l)=>{const{__scopeScrollArea:r,...a}=t,n=y(de,r),[s,m]=d.useState(0),[i,o]=d.useState(0),h=!!(s&&i);return B(n.scrollbarX,()=>{const c=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(c),o(c)}),B(n.scrollbarY,()=>{const c=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(c),m(c)}),h?e.jsx(W.div,{...a,ref:l,style:{width:s,height:i,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Y(t){return t?parseInt(t,10):0}function ke(t,l){const r=t/l;return isNaN(r)?0:r}function Q(t){const l=ke(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=(t.scrollbar.size-r)*l;return Math.max(a,18)}function jt(t,l,r,a="ltr"){const n=Q(r),s=n/2,m=l||s,i=n-m,o=r.scrollbar.paddingStart+m,h=r.scrollbar.size-r.scrollbar.paddingEnd-i,c=r.content-r.viewport,p=a==="ltr"?[0,c]:[c*-1,0];return Me([o,h],p)(t)}function pe(t,l,r="ltr"){const a=Q(l),n=l.scrollbar.paddingStart+l.scrollbar.paddingEnd,s=l.scrollbar.size-n,m=l.content-l.viewport,i=s-a,o=r==="ltr"?[0,m]:[m*-1,0],h=rt(t,o);return Me([0,m],[0,i])(h)}function Me(t,l){return r=>{if(t[0]===t[1]||l[0]===l[1])return l[0];const a=(l[1]-l[0])/(t[1]-t[0]);return l[0]+a*(r-t[0])}}function Fe(t,l){return t>0&&t<l}var wt=(t,l=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},a=0;return(function n(){const s={left:t.scrollLeft,top:t.scrollTop},m=r.left!==s.left,i=r.top!==s.top;(m||i)&&l(),r=s,a=window.requestAnimationFrame(n)})(),()=>window.cancelAnimationFrame(a)};function G(t,l){const r=D(t),a=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(a.current),[]),d.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,l)},[r,l])}function B(t,l){const r=D(l);Ve(()=>{let a=0;if(t){const n=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(r)});return n.observe(t),()=>{window.cancelAnimationFrame(a),n.unobserve(t)}}},[t,r])}var Ie=Ee,Nt=Re,yt=Be;const $=d.forwardRef(({className:t,children:l,...r},a)=>e.jsxs(Ie,{ref:a,className:we("relative overflow-hidden",t),...r,children:[e.jsx(Nt,{className:"h-full w-full rounded-[inherit]",children:l}),e.jsx(Oe,{}),e.jsx(yt,{})]}));$.displayName=Ie.displayName;const Oe=d.forwardRef(({className:t,orientation:l="vertical",...r},a)=>e.jsx(ie,{ref:a,orientation:l,className:we("flex touch-none select-none transition-colors",l==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",l==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(_e,{className:"relative flex-1 rounded-full bg-border"})}));Oe.displayName=ie.displayName;function Qt({missionId:t,isOpen:l,onClose:r}){const{user:a}=se(),[n,s]=d.useState("overview"),[m,i]=d.useState(null),[o,h]=d.useState(""),[c,p]=d.useState(null),[u,g]=d.useState(""),[j,b]=d.useState(!1),[T,C]=d.useState(!1),{data:f,isLoading:M,error:A}=fe({queryKey:["mission-detail",t],queryFn:async()=>{if(!t)throw new Error("ID de mission manquant");console.log("🔍 Chargement mission ID:",t);try{const x=await fetch(`/api/missions/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!x.ok){const S=await x.text();throw console.error("❌ Erreur API mission:",x.status,S),new Error(`Erreur ${x.status}: ${x.statusText}`)}const v=await x.json();return console.log("✅ Mission chargée:",v?.title||"Sans titre"),v}catch(x){throw console.error("❌ Erreur réseau mission:",x),x}},enabled:!!t&&l,retry:1,retryDelay:2e3,staleTime:3e4}),z=x=>{const v=typeof x=="string"?parseFloat(x):x;return Array.from({length:5},(S,F)=>e.jsx(Pe,{className:`w-3 h-3 ${F<Math.floor(v)?"text-yellow-400 fill-current":"text-gray-300"}`},F))};if(M)return e.jsx(I,{open:l,onOpenChange:r,children:e.jsx(O,{className:"w-[95vw] max-w-lg mx-auto p-0 gap-0 bg-white",children:e.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-500 border-t-transparent"}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Chargement..."})]})})})});if(A||!f)return e.jsx(I,{open:l,onOpenChange:r,children:e.jsx(O,{className:"w-[95vw] max-w-lg mx-auto p-6 gap-4 bg-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-50 rounded-full flex items-center justify-center",children:e.jsx(st,{className:"w-8 h-8 text-red-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Erreur de chargement"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:A instanceof Error?A.message:"Mission introuvable"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(w,{onClick:()=>window.location.reload(),variant:"outline",size:"sm",children:"Recharger"}),e.jsx(w,{onClick:r,size:"sm",children:"Fermer"})]})]})})});const E=Ye(f.category),N=f.bids?[...f.bids].sort((x,v)=>parseFloat(x.price)-parseFloat(v.price)):[],R=f.teamRequirements&&f.teamRequirements.length>0;return e.jsxs(I,{open:l,onOpenChange:r,children:[e.jsxs(O,{className:"w-[95vw] h-[85vh] max-w-4xl p-0 gap-0 bg-gray-50 overflow-hidden rounded-xl",children:[e.jsxs(ae,{className:"sr-only",children:[e.jsx(ne,{children:f.title}),e.jsx(qe,{children:"Détails de la mission"})]}),e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-purple-600 text-white relative flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6",children:[e.jsx(w,{onClick:r,size:"sm",variant:"ghost",className:"text-white hover:bg-white/20 p-2 rounded-full md:hidden",children:e.jsx(lt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 md:flex-none",children:[e.jsx("h2",{className:"text-lg md:text-xl font-bold leading-tight pr-2 md:pr-0",children:f.title}),e.jsxs("p",{className:"text-blue-100 text-xs md:text-sm mt-1 opacity-90",children:["Par ",f.clientName," • ",V(f.budget||"0")]})]}),e.jsx(w,{onClick:r,size:"sm",variant:"ghost",className:"text-white hover:bg-white/20 p-2 rounded-full","aria-label":"Fermer la modal",children:e.jsx($e,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-4 pb-4 md:px-6",children:e.jsxs("div",{className:"flex items-center gap-4 text-xs md:text-sm text-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(at,{className:"w-3 h-3"}),e.jsxs("span",{children:[N.length," candidature",N.length!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"w-3 h-3"}),e.jsx("span",{children:q(f.createdAt||new Date().toISOString())})]}),E&&e.jsx(_,{className:"bg-white/20 text-white border-none text-xs px-2 py-0.5",children:E.name})]})})]}),e.jsx("div",{className:"bg-white border-b flex-shrink-0",children:e.jsxs(Ke,{value:n,onValueChange:s,className:"w-full",children:[e.jsx(Qe,{className:"w-full h-12 bg-transparent rounded-none border-none p-0",children:e.jsxs("div",{className:"flex w-full",children:[e.jsxs(ee,{value:"overview",className:"flex-1 h-12 text-xs md:text-sm font-medium data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-blue-600 data-[state=active]:text-blue-600 rounded-none",children:[e.jsx(je,{className:"w-4 h-4 mr-1.5"}),"Aperçu"]}),e.jsxs(ee,{value:"bids",className:"flex-1 h-12 text-xs md:text-sm font-medium data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-blue-600 data-[state=active]:text-blue-600 rounded-none",children:[e.jsx(xe,{className:"w-4 h-4 mr-1.5"}),"Offres (",N.length,")"]}),R&&e.jsxs(ee,{value:"team",className:"flex-1 h-12 text-xs md:text-sm font-medium data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-blue-600 data-[state=active]:text-blue-600 rounded-none",children:[e.jsx(he,{className:"w-4 h-4 mr-1.5"}),"Équipe"]})]})}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx(te,{value:"overview",className:"m-0 h-full overflow-y-hidden",children:e.jsx($,{className:"h-full w-full",children:e.jsxs("div",{className:"p-4 md:p-6 space-y-4 pb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 md:p-6 shadow-sm border",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3 text-sm md:text-base",children:"Description du projet"}),e.jsx("p",{className:"text-gray-700 leading-relaxed text-sm md:text-base",children:f.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",children:e.jsx(nt,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-medium text-gray-900 text-sm",children:"Budget"})]}),e.jsx("div",{className:"text-xl md:text-2xl font-bold text-green-600",children:V(f.budget||"0")})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(ye,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-medium text-gray-900 text-sm",children:"Localisation"})]}),e.jsx("div",{className:"text-blue-600 font-medium text-sm md:text-base",children:f.location||"Non spécifié"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center",children:e.jsx(ot,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-medium text-gray-900 text-sm",children:"Intérêt"})]}),e.jsxs("div",{className:"text-purple-600 font-medium text-sm md:text-base",children:[N.length," candidature",N.length!==1?"s":""]})]})]}),a&&a.type==="provider"&&f.clientName!==a.name&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 md:p-6 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:e.jsx(Ce,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm md:text-base",children:"Candidater à cette mission"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Soumettez votre proposition"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(w,{onClick:()=>C(!T),className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-sm",size:"default",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Analyser avec l'IA"]}),e.jsxs(w,{onClick:()=>b(!j),className:"w-full bg-green-600 hover:bg-green-700 text-sm",size:"default",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),j?"Masquer le formulaire":"Soumettre une offre"]})]}),T&&e.jsx("div",{className:"mt-4 p-4 bg-white rounded-lg border",children:e.jsx(tt,{missionTitle:f.title,missionDescription:f.description,missionBudget:parseFloat(f.budget||"0"),missionCategory:f.category,currentBid:{},providerProfile:{rating:4.5,completedProjects:25,skills:["React","Node.js","TypeScript"],portfolio:[]},competitorBids:N,onOptimizedBidGenerated:x=>{b(!0)}})}),j&&e.jsx("div",{className:"mt-4 p-4 bg-white rounded-lg border",children:e.jsx(it,{missionId:f.id,onSuccess:()=>{b(!1),C(!1)}})})]}),a&&a.type==="provider"&&f.clientName===a.name&&e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(ue,{className:"w-4 h-4 text-white"})}),e.jsx("p",{className:"text-blue-700 font-medium text-sm",children:"Ceci est votre mission"})]})})]})})}),e.jsx(te,{value:"bids",className:"m-0 h-full overflow-y-hidden",children:e.jsx($,{className:"h-full w-full",children:e.jsx("div",{className:"p-4 md:p-6 space-y-4 pb-8",children:N.length===0?e.jsxs("div",{className:"bg-white rounded-lg p-8 md:p-12 text-center shadow-sm border",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(xe,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune candidature"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Les prestataires peuvent encore postuler"})]}):e.jsx("div",{className:"space-y-3",children:N.map((x,v)=>e.jsxs("div",{className:"bg-white rounded-lg p-4 md:p-6 shadow-sm border hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:x.providerName.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900 cursor-pointer hover:text-blue-600 transition-colors text-sm md:text-base",onClick:()=>{i(x.providerId),h(x.providerName)},children:x.providerName}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"flex items-center",children:z(x.rating||"5.0")}),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:[parseFloat(x.rating||"5.0").toFixed(1),"/5"]}),v===0&&N.length>1&&e.jsx(_,{className:"bg-green-100 text-green-700 text-xs ml-2",children:"Meilleure offre"})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg md:text-xl font-bold text-green-600",children:V(x.price)}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center justify-end mt-1",children:[e.jsx(Se,{className:"w-3 h-3 mr-1"}),x.timeline]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 md:p-4 mb-4 border-l-4 border-blue-400",children:e.jsx("p",{className:"text-gray-700 text-sm md:text-base leading-relaxed whitespace-pre-line",children:x.proposal})}),a&&f.userName===a.name&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsxs(w,{onClick:()=>{p(x.id),g(x.providerName)},variant:"outline",size:"sm",className:"flex items-center justify-center gap-2 text-sm",children:[e.jsx(H,{className:"w-4 h-4"}),"Répondre"]}),e.jsxs(w,{size:"sm",className:"bg-green-500 hover:bg-green-600 text-white flex items-center justify-center gap-2 text-sm",children:[e.jsx(ue,{className:"w-4 h-4"}),"Accepter"]})]})]},x.id))})})})}),R&&e.jsx(te,{value:"team",className:"m-0 h-full overflow-y-hidden",children:e.jsx($,{className:"h-full w-full",children:e.jsx("div",{className:"p-4 md:p-6 space-y-4 pb-8",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 md:p-6 shadow-sm border",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2 text-sm md:text-base",children:[e.jsx(he,{className:"w-5 h-5"}),"Composition de l'équipe"]}),e.jsx("div",{className:"space-y-3",children:f.teamRequirements?.map((x,v)=>e.jsxs("div",{className:"border-l-4 border-l-blue-500 bg-blue-50/50 rounded-r-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm md:text-base",children:x.role}),e.jsx("p",{className:"text-gray-600 text-xs md:text-sm",children:x.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm md:text-base font-bold text-green-600",children:V(x.budget||"0")}),e.jsxs(_,{variant:"outline",className:"text-xs",children:[x.quantity," personne",x.quantity>1?"s":""]})]})]}),x.skills&&x.skills.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-xs mb-2",children:"Compétences :"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:x.skills.map((S,F)=>e.jsx(_,{variant:"secondary",className:"text-xs",children:S},F))})]})]},v))})]})})})})]})]})})]})]}),e.jsx(ct,{providerId:m,providerName:o,isOpen:!!m,onClose:()=>{i(null),h("")}}),e.jsx(dt,{bidId:c,bidderName:u,isOpen:!!c,onClose:()=>{p(null),g("")}})]})}export{Qt as M};
